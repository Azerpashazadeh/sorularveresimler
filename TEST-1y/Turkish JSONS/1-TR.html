<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>

    <style>
        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */
        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */
        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */
        body {
            font-family: "Times New Roman";
            display: grid;
            /* Mevcut düzen korunuyor */
            height: 10vh;
            /* Boyut aynı kalıyor */
            place-items: center;
            /* İçerik merkezi hizalanır */
            margin: 0;
            padding: 0;

        }



        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #ffffff;
        }

        #quizButton1 {
            top: 120px;
            /* Butonun üst kenardan mesafesi */
            left: 50%;
            transform: translateX(-50%);
            position: absolute;
            padding: 10px 40px;
            display: inline-block;
            text-decoration: none;
            text-transform: uppercase;
            overflow: hidden;
            cursor: pointer;
            font: 16px/24px Arial, sans-serif;
            background-color: #4973ff;
            border: none;
            border-radius: 5px;
            /* Butonun varsayılan kenarlığını kaldırır */
            color: #fff;
            /* Metin rengi */
            letter-spacing: 3px;
            /* Metin harfleri arası boşluk */

        }

        #viewResult {
            top: 430px;
            /* Butonun üst kenardan mesafesi */
            left: 50%;
            transform: translateX(-50%);
            position: absolute;
            padding: 6px 10px;
            display: inline-block;
            text-decoration: none;
            overflow: hidden;
            cursor: pointer;
            font: 14px/22px Times, sans-serif;
            background-color: #4973ff;
            border: none;
            border-radius: 5px;
            /* Butonun varsayılan kenarlığını kaldırır */
            color: #fff;
            /* Metin rengi */
            letter-spacing: 1px;
            /* Metin harfleri arası boşluk */

        }


        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            /* İçeriğe tıklamayı engellemez */
            box-shadow:
                inset 0 60px 0 0 #085dc4,
                /* Üst kenar için 50px kalınlık */
                inset 0 -60px 0 0 #085dc4,
                /* Alt kenar için 60px kalınlık */
                inset 50px 0 0 0 #085dc4,
                /* Sol kenar için 10px kalınlık */
                inset -50px 0 0 0 #085dc4;
            /* Sağ kenar için 10px kalınlık */
            z-index: 1;
            /* Diğer içeriklerin altında görünmesini sağlar */
        }

        /* Mobil cihazlar için stil tanımlamaları */
        @media (max-width: 768px) {
            .overlay {
                box-shadow:
                    inset 0 60px 0 0 #085dc4,
                    /* Üst kenar */
                    inset 5px 0 0 0 #085dc4,
                    /* Sol kenar */
                    inset -5px 0 0 0 #085dc4,
                    /* Sağ kenar */
                    inset 0 calc(-11.75vh) 0 0 #085dc4;
                /* Alt kenar */
            }
        }




        .overlay-thin-top {
            box-shadow:
                inset 0 10px 0 0 #085dc4,
                /* Üst kenar 5px */
                inset 0 -60px 0 0 #085dc4,
                /* Alt kenar */
                inset 50px 0 0 0 #085dc4,
                /* Sol kenar */
                inset -50px 0 0 0 #085dc4;
            /* Sağ kenar */
        }

        @media (max-width: 768px) {
            .overlay-thin-top {
                box-shadow:
                    inset 0 10px 0 0 #085dc4,
                    /* Üst kenar 5px */
                    inset 0 calc(-11.75vh) 0 0 #085dc4,
                    /* Alt kenar */
                    inset 5px 0 0 0 #085dc4,
                    /* Sol kenar */
                    inset -5px 0 0 0 #085dc4;
                /* Sağ kenar */
            }
        }


        .coordinateDisplay {
            position: fixed;

            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 14px;
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
            pointer-events: none;

        }

        .highlightXY {
            position: absolute;
            background-color: rgba(255, 0, 0, 0.5);
            border: 1px solid red;
            pointer-events: none;

        }


        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */
        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */
        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */

        #quizAlani {
            outline: 1px solid blue;
        }

        #soruAlani {
            outline: 1px solid rgb(93, 242, 93);
        }

        #timerDiv {
            outline: 1px solid orange;
        }

        #cevaplarContainer {
            outline: 1px solid purple;
        }

        #buttonDiv {
            outline: 1px solid rgb(247, 30, 30);

        }

        #app {
            outline: 2px solid rgb(247, 10, 192);

        }

        #soruResmi {
            outline: 2px solid rgb(69, 10, 247);
        }

        #cevaplar {
            outline: 2px solid rgb(247, 255, 2);
        }

        #feedbackDiv {
            outline: 2px solid rgb(40, 201, 11);

        }

        #proceedSection3End {
            outline: 2px solid rgb(247, 15, 15);
        }

        #endMessage3-S3 {
            outline: 2px solid rgb(99, 31, 246);
        }







        /*//GÖRÜNMEYENLER, QUİZİN HEÇ BİR  YERİNDE RENK OLUŞTURMADI//*/

        #quiz-header {
            outline: 2px solid yellow;
        }

        .questionContainer {
            outline: 5px solid purple;
        }


        h4,
        p {
            margin-left: 20px;

            /* Sol tarafta 20px boşluk */
        }

        .hidden {
            display: none !important;
        }

        .center-button {
            /*Açıklamalar bölümündeki mavi düymeleri ayarlar "PROCEED"*/
            display: flex;
            justify-content: center;
            margin-top: 25px;
        }

        /*
                   ███████████     ███████    █████       █████  █████ ██████   ██████            ████ 
                  ░░███░░░░░███  ███░░░░░███ ░░███       ░░███  ░░███ ░░██████ ██████            ░░███ 
                   ░███    ░███ ███     ░░███ ░███        ░███   ░███  ░███░█████░███             ░███ 
                   ░██████████ ░███      ░███ ░███        ░███   ░███  ░███░░███ ░███  ██████████ ░███ 
                   ░███░░░░░███░███      ░███ ░███        ░███   ░███  ░███ ░░░  ░███ ░░░░░░░░░░  ░███ 
                   ░███    ░███░░███     ███  ░███      █ ░███   ░███  ░███      ░███             ░███ 
                   ███████████  ░░░███████░   ███████████ ░░████████   █████     █████            █████
                  ░░░░░░░░░░░     ░░░░░░░    ░░░░░░░░░░░   ░░░░░░░░   ░░░░░     ░░░░░            ░░░░░  */



        @media only screen and (max-width: 768px) {

            #timerDiv {
                /* Manuel boyut ayarları */
                width: 100px;
                /* TimerDiv genişliği */
                height: 100px;
                /* TimerDiv yüksekliği */
                margin-top: 130px;

                /* Pozisyon ayarları */
                margin: 0 auto;
                /* Kendini yatayda ortalar */
                /* Merkezi hizalama ve düzen */
                display: flex;
                /* Flex düzeni */
                justify-content: center;
                /* İçeriği yatayda ortalar */
                align-items: center;
                /* İçeriği dikeyde ortalar */
                padding: 0;
                z-index: 0;

                /* İsteğe bağlı stil */

                box-sizing: border-box;
                /* Padding dahil genişlik hesaplaması */
            }

            #app {
                width: 100px;
                /* App genişliği */
                height: 100px;
                /* App yüksekliği */

                margin: 0;
                /* Tüm marginleri sıfırlar */
                display: flex;
                /* İçerik için flex düzeni */
                justify-content: center;
                /* Yatayda içerik hizalama */
                align-items: center;
                /* Dikeyde içerik hizalama */
                margin-top: -55px;
                z-index: 100;

            }

            #soruAlani {
                margin-top: 5px;
                height: 500px;
                /* Birinci bölüm komple sorualanını aşağı yukarı kaydırma*/
                padding: 4px;
                position: relative;
                box-sizing: border-box;
                /* Padding dahil genişlik kontrolü sağlar */
            }

            #cevaplarContainer {
                margin-top: -25px;
                height: 800px;

                /* Maksimum yüksekliği sınırlandırmaz */
            }

            #quizAlani {
                height: auto;
                /* İçeriğe göre yüksekliği ayarlar */
                width: 100%;
                /* Genişliği tamamen kullanır */
                max-width: 700px;
                /* Maksimum genişlik sınırı */
                box-sizing: border-box;
                /* Padding ve border dahil genişlik hesaplaması */
                overflow: visible;
                /* Taşan içeriklerin görünmesini sağlar */

            }


            #soruNumarasiS3 {
                font-size: 14px;
                color: #fefefe;
                /* QUESTION 1 OF 25 yazısının boyutu */
            }

            #cevaplar {
                display: flex;
                flex-direction: column;
                /* Şıkları dikey hizalar */
                justify-content: center;
                /* Şıkları dikey ortalar */
                align-items: center;
                /* Şıkları yatayda ortalar */
            }

            .cevapSecenegi {
                width: 95%;
                /* Şıkların genişliği %90 */
                margin-bottom: 10px;
                /* Şıklar arasında boşluk */
                text-align: left;
                /* Metni sola hizalar */
            }

            .questionContainer {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            #buttonDiv {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 10px;
                position: fixed;
                bottom: 11%;
                left: 50%;
                /* Ekranın tam ortasına hizalan */
                transform: translateX(-50%);
                /* Ortalaması için sola doğru yarı genişliği kadar kaydır */
                width: 100%;
                /* Genişliği tarayıcının %95'i */
                padding: 0 2px;
                z-index: 10;
                box-sizing: border-box;
                overflow: hidden;
                margin: 0;
                /* margin:0 auto; yerine margin:0 kullanın */
            }







        }


        @media only screen and (min-width: 768px) {
            .questionContainer {
                display: flex;
                flex-direction: row;
                gap: 10px;
                /* Resim ve cevap seçenekleri arasındaki mesafe */
                flex-grow: 1;
                /* Boş alanı kullanmasını sağlar */
                width: 10vw;
                /* Tarayıcı genişliği boyunca uzanır */
                max-width: none;
                /* Maksimum genişlik sınırını kaldırır */
                margin: 0 auto;
                /* Ortalamak için */
                padding: 0 20px;
                /* Kenarlara boşluk bırakmak için */
            }

            #soruNumarasiS3 {
                font-size: 18px;
                color: #fefefe;
                /* QUESTION 1 OF 25 yazısının boyutu */
                display: flex;
                justify-content: center;

                /* Yatayda ortalar */

            }

            #quizAlani {
                height: 540px;
                /* Sabit yükseklik */
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 95%;
                /* Tarayıcı genişliğinin %90'ını kaplar */
                max-width: 1200px;
                /* Genişlik 1400px'i aşmaz */
                min-width: 600px;
                /* Genişlik 600px'ten küçük olmaz */
                margin: 0 auto;
                /* Ortalamak için */
                padding: 0 20px;
                /* Kenarlara boşluk bırakır */
                box-sizing: border-box;
                /* Genişlik hesaplamasını düzenler */

                /* Yatay kaydırmayı kaldırır */
                margin-top: 20px !important;
                z-index: 0;
            }


            #soruAlani {
                margin-top: 5px;
                /* Birinci bölüm komple sorualanını aşağı yukarı kaydırma*/
                padding: 4px;
                position: relative;
                box-sizing: border-box;
                /* Padding dahil genişlik kontrolü sağlar */
            }


            #timerDiv {
                /* Manuel boyut ayarları */
                width: 100px;
                /* TimerDiv genişliği */
                height: 100px;
                /* TimerDiv yüksekliği */
                margin-top: 130px;

                /* Pozisyon ayarları */
                margin: 0 auto;
                /* Kendini yatayda ortalar */
                /* Merkezi hizalama ve düzen */
                display: flex;
                /* Flex düzeni */
                justify-content: center;
                /* İçeriği yatayda ortalar */
                align-items: center;
                /* İçeriği dikeyde ortalar */
                padding: 0;
                z-index: 0;

                /* İsteğe bağlı stil */

                box-sizing: border-box;
                /* Padding dahil genişlik hesaplaması */
            }

            #app {
                width: 100px;
                /* App genişliği */
                height: 100px;
                /* App yüksekliği */

                margin: 0;
                /* Tüm marginleri sıfırlar */
                display: flex;
                /* İçerik için flex düzeni */
                justify-content: center;
                /* Yatayda içerik hizalama */
                align-items: center;
                /* Dikeyde içerik hizalama */
                margin-top: -70px;
                z-index: 100;

            }








            #cevaplarContainer {
                margin-top: -20px;
                /* Yukarıdan negatif margin */
                width: 100%;
                /* Kapsayıcı genişliğini tamamen kullanır */
                height: auto;
                /* İçeriğe göre yüksekliği ayarlar */
                padding: 0;
                /* İçerik ile kenarlar arasında boşluk bırakmaz */
                box-sizing: border-box;
                /* Genişlik hesaplamasına padding'i dahil eder */
                overflow: visible;
                /* Dikeyde taşan içeriği görünür yapar */
                max-height: none;
                /* Maksimum yüksekliği sınırlandırmaz */
            }


            #soruResmi {
                padding: 0;
                /* İçerik ile kenarlar arasında boşluk bırakmaz */
                margin-left: 0px;
                /* Sol kenardan boşluk */
                margin-right: 10px;
                /* Sağ kenardan boşluk */
                flex: 60;
                /* Flex düzeninde %55'lik bir genişlik ayarı */
                z-index: 5;
                /* Görünürlük sırasını korur */

                /* Genişleme sınırlarını kaldırma */
                max-width: none;
                /* Maksimum genişlik sınırını kaldırır */
                max-height: none;
                /* Maksimum yükseklik sınırını kaldırır */
                width: auto;
                /* İçeriğe göre genişlik ayarı */
                height: auto;
                /* İçeriğe göre yükseklik ayarı */
            }


            #cevaplar {
                position: relative;
                /* Kapsayıcı için referans noktası oluşturur */
                width: 100%;
                /* Genişlik ayarı */
                height: auto;
                /* Yükseklik içeriğe göre */

                flex: 40;
            }

            .feedback-container {
                position: relative;
                /* absolute yerine relative kullan */
                width: 95%;
                /* Genişliği tam olarak ayarla */
                max-width: 100%;
                margin: 0 auto;
                /* Yatayda ortala */
            }



            #buttonDiv {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 10px;
                position: fixed;
                bottom: 0.7%;
                left: 50%;
                /* Ekranın tam ortasına hizalan */
                transform: translateX(-50%);
                /* Ortalaması için sola doğru yarı genişliği kadar kaydır */
                width: 100%;
                /* Genişliği tarayıcının %95'i */
                padding: 0 2px;
                z-index: 10;
                box-sizing: border-box;
                overflow: hidden;
                margin: 0;
                /* margin:0 auto; yerine margin:0 kullanın */
            }



            #nextButton {
                margin-right: 0px;
                /* Sağ taraftan boşluk azaltılır */
            }






            .cevapSecenegi {
                width: 95%;
                /* Şıkların genişliği %90 */
                margin-bottom: 10px;
                /* Şıklar arasında boşluk */
                text-align: left;
                /* Metni sola hizalar */
            }



        }




        .soruKare {
            width: 30px;
            height: 30px;
            display: inline-block;
            margin: 5px;
            border: 1px solid black;
            text-align: center;
            line-height: 30px;
        }

        /* Birinci bölümün cevap seçeneklerini ayarlayan kod*/
        .cevapSecenegi {
            display: block;
            margin-bottom: 10px;
            border: 1px solid #cecece;
            padding: 10px;
            cursor: pointer;
            border-radius: 10px;
            background-color: rgb(239, 239, 239);
            position: relative;
            /* İkazların doğrulması için */
        }


        /*

                   ███████████     ███████    █████       █████  █████ ██████   ██████             ████████ 
                  ░░███░░░░░███  ███░░░░░███ ░░███       ░░███  ░░███ ░░██████ ██████             ███░░░░███
                   ░███    ░███ ███     ░░███ ░███        ░███   ░███  ░███░█████░███            ░░░    ░███
                   ░██████████ ░███      ░███ ░███        ░███   ░███  ░███░░███ ░███  ██████████   ███████ 
                   ░███░░░░░███░███      ░███ ░███        ░███   ░███  ░███ ░░░  ░███ ░░░░░░░░░░   ███░░░░  
                   ░███    ░███░░███     ███  ░███      █ ░███   ░███  ░███      ░███             ███      █
                   ███████████  ░░░███████░   ███████████ ░░████████   █████     █████           ░██████████
                  ░░░░░░░░░░░     ░░░░░░░    ░░░░░░░░░░░   ░░░░░░░░   ░░░░░     ░░░░░            ░░░░░░░░░░ 
*/


        .question {
            outline: 4px solid rgb(247, 6, 6);
            /* Kırmızı renkte 2px kalınlığında outline */
        }

        #countdown {
            outline: 1px solid blue;
            /* Mavi renkte 2px kalınlığında outline */
        }

        .question-image {
            outline: 3px solid rgb(246, 246, 3);
        }

        .image-container {
            outline: 6px solid rgb(8, 237, 8);
        }

        .answers {
            outline: 3px solid rgb(247, 10, 192);
        }

        p {
            outline: 1px solid rgb(7, 252, 179);
        }

        .image-wrapper {
            outline: 1px solid rgb(53, 122, 240);

        }

        /*iki ve üçüncü  bölümlerde resimden seçme kenarlığı*/







        .cevapSecenegi.resultIcon {
            margin-left: 10px;
            font-size: 20px;
            /* İkaz boyutunu ayarlar */
            vertical-align: middle;
            /* İkaz ortalamayı ayarlar */
        }

        .selectedAnswer {
            background-color: #007bff;
            color: white;
        }

        .correctAnswer::after {
            /* content: " ✔️"; */
            color: rgb(11, 207, 11);
            font-weight: bold;
        }

        .incorrectAnswer::after {
            /* content: " ❌"; */
            color: red;
            font-weight: bold;
        }

        .correctAnswer {
            background-color: rgb(11, 207, 11) !important;
            color: white !important;
        }

        .incorrectAnswer {
            background-color: red !important;
            color: white !important;
        }

        .unselectedAnswer {
            background-color: lightgray !important;
            color: black !important;
        }

        .resultIcon {
            margin-left: 10px;
            font-size: 20px;
            vertical-align: middle;
        }


        #soruSayisi {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
        }

        /* Genel stiller */
        .navigateButton {
            width: 20%;
            height: 6vh;
            cursor: pointer;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            z-index: 1100;
            /* Diğer içeriklerin üzerinde olmak için */
        }


        img {
            /*Birinci bölüm resim boyutu ayarlama*/
            max-width: 100%;
            height: auto;
        }

        .flex-grow {
            flex-grow: 1;
            text-align: center;
        }

        #buttonContainer {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        #startButton,
        #proceedButtonBottom,
        #proceedKnowledgeButton,
        #proceedToFirstQuestionButton,
        #proceedButton {
            display: none;
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 50px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 8px;
        }

        #proceedButton {
            display: none;
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 50px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 8px;
            margin-bottom: 70px;
        }

        #proceedToSecction3Button {
            width: 40%;
            height: 40px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            display: inline-block;
            margin: 0 auto;
            /* Yatayda ortalamak için */
        }

        #startSection3Button,
        #proceedToResultDivBtn {
            width: 80%;
            height: 40px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            margin-top: 30px;
        }

        #additionalMessage {
            display: none;
            text-align: left;
            margin-top: 0px;
            margin-left: 0px;
            margin-right: 10px;
            font-size: 16px;
            color: black;
        }

        #messageArea {
            display: none;
            text-align: left;
            margin-top: 20px;
            margin-left: 20px;
            margin-right: 20px;
            font-size: 16px;
            color: black;
        }

        .knowledge-explanation {
            font-size: 16px;
            margin-bottom: 0px;
            margin-left: 20px;
        }

        .start-insight {
            font-size: 17px;
            margin-bottom: 10px;
            margin-left: 20px;
        }

        #startMessage {
            display: none;
            margin-top: 50px;
            /* İstediğiniz değeri buraya ekleyin */
        }

        #startMessage p,
        #startMessage h4 {
            margin-left: 70px;
            margin-right: 70px;
            margin-bottom: 10px;
        }

        #startMessage .start-insight {
            margin-left: 70px;
            margin-right: 70px;
        }

        /* Mobil versiyon için (maksimum 768px genişlikte) */
        @media (max-width: 768px) {

            #startMessage p,
            #startMessage h4 {
                margin-left: 20px;
                margin-right: 20px;
            }

            #startMessage .start-insight {
                margin-left: 20px;
                margin-right: 20px;
            }
        }



        .button-container {
            display: flex;
            justify-content: center;
            /* Yatayda ortalamak için */
        }




        .flex-grow {
            flex-grow: 1;
            /* h2 elementinin mevcut alanı kaplamasını sağlar */
            text-align: center;
            /* Metni ortalar */
        }

        #button-container button {
            flex-shrink: 0;
            /* Butonların boyutunun küçülmesini engeller */
            padding: 10px 20px;
            /* Butonların iç boşluğu */
        }







        #endMessage {
            display: flex;
            flex-wrap: wrap;
            margin-top: 15px;
            margin-bottom: 20px;
            margin-left: 20px;
            /* İstediğiniz değeri buraya ekleyin */
        }

        #proceedSection3 {
            margin-top: 50px;
        }

        #proceedSection3 .knowledge-explanation {
            margin-bottom: -10px;
            margin-top: 10px;
            /* Elemanlar arasındaki mesafeyi küçültmek için */
        }

        #proceedSection3 h4 {
            margin-top: 20px;
            margin-bottom: -10px;
            /* İstediğiniz değeri buraya ekleyin */
        }

        #proceedSection3 .knowledge-explanation:last-child {
            margin-bottom: 120px;
            /* Son elemanın altındaki boşluğu kaldırmak için */
        }

        .base-timer {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 0 auto;
            padding: 0;
            margin-top: 10px;
            /*Bu bütün bölümlerde zamanlayıcını aşağı yuxarı hizalayır*/
            margin-bottom: 10px;
        }



        .base-timer__label,
        .base-timer__label_S3 {
            position: absolute;
            width: 100px;
            height: 100px;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: bolder;
            color: rgb(255, 255, 255);
        }


        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            text-align: center;
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .popup-btn {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
        }

        .viewResultContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Yatayda ortalama */
            text-align: center;
            /* Metinleri de ortalar */
            width: 100%;
            /* Konteynerin genişliği */
        }




        /*//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////*/



        /* Varsayılan (mobil) düzen - üst üste hizalama */
        .question {
            display: grid;
            grid-template-columns: 1fr 1fr;
            /* 2 eşit sütun */
            gap: 1vw;
            max-width: 1500px;
            width: 100%;
            margin: 1vw auto;
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            border: 1px solid transparent;
            border-radius: 1vw;
            overflow: hidden;
            text-align: left;
        }

        .question p {
            margin-bottom: 11px;
            margin-top: 13px;
            padding-right: 25px;
            padding-left: 5px;
        }

        .question-image {
            width: 100%;
            max-width: 70vw;
            height: auto;
            justify-self: start;
            border-radius: 0.5vw;
            margin-bottom: -15px;
        }

        /* T4 tipi sorular için özel stiller */
        .image-container {
            display: flex;
            /* Flexbox kullan */
            flex-wrap: nowrap;
            /* Yeni satıra geçmesini önle */
            gap: 10px;
            justify-content: center;
            /* Öğeleri ortala */
            max-width: 100%;
            overflow-x: auto;
            /* Yatay kaydırma ekle */
            padding-bottom: 5px;
            /* Kaydırma çubuğu içeriğe yapışmasın */
        }

        /* Öğelerin boyutları */
        .image-container .item {
            flex: 1 1 auto;
            /* Genişleyebilir ve küçülebilir */
            display: flex;
        }



        .image-container.grid-4 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Resim kapsayıcısının konumunu ayarlıyoruz */
        .image-wrapper {
            flex: 1;
            /* Esnemeye izin ver */
            position: relative;
            display: inline-block;
            margin: 0;
            padding: 0;
            overflow: hidden;
            /* Taşmaları engeller */
        }

        /* Resimlerin varsayılan stili */
        .image-wrapper img {
            display: block;
            width: 100%;
            height: auto;
            object-fit: cover;
            /* Kapsayıcıyı tam doldurur */
            margin: 0;
            padding: 0;
        }

        /* Seçili durumda uygulanacak stil */
        /* Seçili durumda uygulanacak stil */
        .image-wrapper.selected::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            /* Viewport yüksekliği */
            background-color: rgba(76, 0, 255, 0.2);
            /* %20 opaklıkta mavi renk */
            pointer-events: none;
            /* Katmanın tıklamaları engellememesi için */
            box-sizing: border-box;
        }


        .question-image-t4 {
            max-width: 10%;
            height: auto;
            object-fit: contain;
            cursor: pointer;
            transition: none;
        }

        .question-image-t4:hover {
            transform: scale(1);
        }

        .answers {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 0;
        }

        .answers label {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            margin-top: 0px;
            border-radius: 8px;
            cursor: pointer;
        }

        .answers input[type="radio"],
        .answers input[type="checkbox"] {
            margin-right: 10px;
        }

        #previous-button,
        #next-button {
            position: absolute;
            width: 22vw;
            height: 6vh;
            z-index: 999;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            text-align: center;
            line-height: 6vh;
        }

        /* Masaüstü düzeni */
        @media (min-width: 768px) {
            .question {
                display: grid;
                grid-template-rows: auto 1fr auto;
                max-width: 80%;
                grid-template-columns: 60% 40%;
                gap: 0px;
                align-items: start;
                top: 55px;
                padding: 1vw;
                padding-bottom: 50px;
            }

            .question-image {
                grid-column: 1;
                grid-row: 1 / span 3;
            }

            .question-image-t4 {
                width: 100%;
                height: auto;
                margin-right: 10px;
                max-width: 100%;
            }

            .image-container {
                grid-column: 1;
                grid-row: 1 / span 3;
                padding: 10px;
            }

            .question p {
                grid-column: 2;
                grid-row: 1;
                margin-top: -2px;
            }

            .answers {
                grid-column: 2;
                grid-row: 2;
                margin-left: 30px;

            }

            .feedback-container {
                grid-column: 2;
                grid-row: 3;
                margin-left: 30px;
                width: calc(100% - 30px);
                position: relative;
            }

            #previous-button {
                bottom: 1%;
                left: 1%;
            }

            #next-button {
                bottom: 1%;
                right: 1%;
            }

            .question.no-image {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
            }

            .question.no-image .question p,
            .question.no-image .answers {
                width: 60%;
                text-align: center;
                margin-left: 0;
            }

            .question.no-image .feedback-container {
                width: 100%;
                margin-left: 0;
            }
        }

        /* Mobil düzen */
        @media (max-width: 767px) {
            .question {
                position: absolute;
                top: 35px;
                left: 50%;
                transform: translateX(-50%);
                /* Yalnızca yatayda ortala */
                width: 90vw;
                /* Genişliği ayarla */
                max-width: 92%;
                /* Çok geniş olmaması için */
                height: auto;
                /* Yükseklik içeriğe göre ayarlansın */
                min-height: 70vh;
                /* Minimum olarak ekranı kaplasın */
                overflow-y: auto;
                /* İçerik taşarsa kaydırma çubuğu */
                overflow-x: hidden;
                /* Yatay taşmayı engelle */
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                /* İçeriği yukarı hizala */
                padding: 10px;
                padding-bottom: calc(11vh + 7vh);
                /* Ekran yüksekliğinin %11'i + 6vh */
                background: white;
                /* Arka planı düzenle */
                border-radius: 10px;
                /* Köşeleri yumuşat */
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
                /* Hafif gölge ekleyerek daha güzel bir görünüm sağla */
                z-index: -1;
            }




            .answers,
            .question p {
                width: 100%;
                text-align: left;
            }

            .answers {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-top: 0;
            }

            .question.no-image .question p,
            .question.no-image .answers {
                width: 98%;
                text-align: center;
                margin-left: 0;
            }

            .question-image {
                max-width: 100%;
            }

            .question-video {
                max-width: 100%;
                aspect-ratio: 16/9;

            }

            .question-image-t4 {
                max-width: 100%;
                height: auto;
                margin: 10px 0;
            }

            .image-container.grid-4 {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
                padding: 10px;
                overflow: visible;
            }

            #previous-button,
            #next-button {
                position: fixed;
                width: 20%;
                height: 6vh;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 8px;
                text-align: center;
                line-height: 5vh;
                cursor: pointer;
                z-index: 1000;
            }

            #previous-button {
                left: 1%;
                bottom: 11%;
            }

            #next-button {
                right: 1%;
                bottom: 11%;
            }

            .show-rectangle {
                display: block;
            }



        }







        /*
                   ███████████     ███████    █████       █████  █████ ██████   ██████             ████████ 
                  ░░███░░░░░███  ███░░░░░███ ░░███       ░░███  ░░███ ░░██████ ██████             ███░░░░███
                   ░███    ░███ ███     ░░███ ░███        ░███   ░███  ░███░█████░███            ░░░    ░███
                   ░██████████ ░███      ░███ ░███        ░███   ░███  ░███░░███ ░███  ██████████   ██████░ 
                   ░███░░░░░███░███      ░███ ░███        ░███   ░███  ░███ ░░░  ░███ ░░░░░░░░░░   ░░░░░░███
                   ░███    ░███░░███     ███  ░███      █ ░███   ░███  ░███      ░███             ███   ░███
                   ███████████  ░░░███████░   ███████████ ░░████████   █████     █████           ░░████████ 
                  ░░░░░░░░░░░     ░░░░░░░    ░░░░░░░░░░░   ░░░░░░░░   ░░░░░     ░░░░░             ░░░░░░░░  
                                                                                                            
                                                                                                            
                                                                                                            */







        .drag-drop-container {
            outline: 3px solid rgb(19, 2, 255);
        }

        .box {
            outline: 1px purple;
        }

        #app-s3 {
            outline: 5px yellow;
        }



        /*/////////////////////////////////////Bölüm-3///////////////////////////////////////////////////////////////////////////////////////////////////////////////*/
        .questionS3 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1vw;
            max-width: 1500px;
            width: 100%;
            margin: 1vw auto;
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            border: 3px solid red;
            border-radius: 1vw;
            overflow: hidden;
            text-align: left;

        }

        .questionS3 p {
            font-size: 17px;
            /* Yazı boyutu */
            font-weight: 500;
            /* Kalın yazı */
            margin-bottom: 11px;
            margin-top: 10px;
            padding: 8px 25px 8px 5px;
            /* Üst-alt ve yan boşluklar */
            background-color: rgba(200, 200, 200, 0.3);
            /* Hafif gri arka plan */
            border-radius: 5px;
            /* Köşeleri hafif yuvarlatma */
            display: inline-block;
            /* Metin uzunluğuna göre esnek genişlik */
            max-width: 100%;
            /* Genişliğin çok büyümemesi için */
            word-wrap: break-word;
            /* Uzun kelimeleri kır */
        }


        .questionS3 .question-image {
            width: 100%;
            max-width: 70vw;
            height: auto;
            justify-self: start;
            border-radius: 0.5vw;
            margin-bottom: -15px;
        }

        .questionS3 .question-video {
            width: 100%;
            max-width: 70vw;
            height: auto;
            justify-self: start;
            border-radius: 0.5vw;
            margin-bottom: -15px;
            aspect-ratio: 16/9;
        }

        .questionS3 .image-container {
            display: flex;
            /* Flexbox kullan */
            flex-wrap: nowrap;
            /* Yeni satıra geçmesini önle */
            gap: 10px;
            justify-content: center;
            /* Öğeleri ortala */
            max-width: 100%;
            overflow-x: auto;
            /* Yatay kaydırma ekle */
            padding-bottom: 5px;
            /* Kaydırma çubuğu içeriğe yapışmasın */
        }

        /* Yeni eklenen grid-4 sınıfı için özel stiller */
        .questionS3 .image-container.grid-4 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
        }

        .questionS3 .image-wrapper {
            flex: 1;
            /* Esnemeye izin ver */
            position: relative;
            display: inline-block;
            margin: 0;
            padding: 0;
            overflow: hidden;
            /* Taşmaları engeller */
        }


        .questionS3 .image-wrapper img {
            display: block;
            width: 100%;
            height: auto;
            object-fit: cover;
            /* Kapsayıcıyı tam doldurur */
            margin: 0;
            padding: 0;
        }



        .questionS3 .image-wrapper.selected::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            /* Viewport yüksekliği */
            background-color: rgba(76, 0, 255, 0.2);
            /* %20 opaklıkta mavi renk */
            pointer-events: none;
            /* Katmanın tıklamaları engellememesi için */
            box-sizing: border-box;
        }


        /* grid-4 içindeki wrapper'lar için özel stil */
        .questionS3 .image-container.grid-4 .image-wrapper41 {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .questionS3 .question-image-t4 {
            max-width: 10%;
            height: auto;
            margin: 0;
            display: block;
        }

        /* grid-4 içindeki resimler için özel stil */
        .questionS3 .image-container.grid-4 .question-image-t4 {
            max-width: 100%;
            height: auto;
            object-fit: contain;
        }

        .questionS3 .answers {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 0;
        }

        .questionS3 .answers label {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            margin-top: 0px;
            border-radius: 8px;
            cursor: pointer;
        }

        .questionS3 .answers input[type="radio"],
        .questionS3 .answers input[type="checkbox"] {
            margin-right: 10px;
        }



        .cevapSecenegi-s3 {
            display: block;
            margin-bottom: 10px;
            border: 1px solid #cecece;
            padding: 10px;
            cursor: pointer;
            border-radius: 10px;
            background-color: rgb(239, 239, 239);
            position: relative;
        }

        @media (min-width: 768px) {
            .questionS3 {
                display: grid;
                grid-template-rows: auto 1fr auto;
                max-width: 80%;
                grid-template-columns: 60% 40%;
                gap: 0px;
                align-items: start;
                top: 57px;
                padding: 1vw;
                padding-bottom: 50px;

            }

            .questionS3 .question-image,
            .questionS3 .question-video {
                grid-column: 1;
                grid-row: 1 / span 3;
            }


            .questionS3 .question-image-t4 {
                width: 100%;
                height: auto;
                margin-right: 10px;
                max-width: 100%;
            }

            /* grid-4 için masaüstü özel stilleri */
            .questionS3 .image-container {
                grid-column: 1;
                grid-row: 1 / span 3;
                padding: 10px;
            }

            .questionS3 .question p {
                grid-column: 2;
                grid-row: 1;
                margin-top: -2px;
            }

            .questionS3 .answers {
                grid-column: 2;
                grid-row: 2;
                margin-left: 30px;

            }






            .cevapSecenegi-s3 {
                width: 95%;
                /* Şıkların genişliği %90 */
                margin-bottom: 10px;
                /* Şıklar arasında boşluk */
                text-align: left;
                /* Metni sola hizalar */
            }







            .questionS3.no-image .answers {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
            }

            .questionS3.no-image p {
                text-align: center;
            }

            .questionS3 p {
                grid-column: 2;
                grid-row: 1;
                margin-top: -2px;

            }

            .drag-drop-container {
                grid-column: 1;
                /* 1. sütunda başlar */
                grid-row: 1 / span 2;
                /* 1. satırdan başlar ve 2 satır boyunca uzanır */
            }






            .questionS3 .feedback-container {
                grid-column: 2;
                grid-row: 2;
                margin-left: 10px;
                /* Gerekli değil, kaldırıldı */
                width: calc(100% - 30px);
                position: relative;
                justify-self: center;
                /* Yatayda ortalama */
            }


            #button-container {
                position: fixed;
                /* Konteyneri sabitle */
                bottom: 0%;
                /* Sayfanın altından 11% yukarıda */
                left: 50%;
                /* Sol kenarı ekranın %50'lik kısmına yerleştir */
                transform: translateX(-50%);
                /* Sol kenarı ortaladığımızda, konteynerin tam ortalanmasını sağlar */
                display: flex;
                align-items: center;
                /* Dikeyde ortala */
                justify-content: space-between;
                /* Butonlar ve h2 arasında eşit boşluk bırak */
                gap: 10px;
                /* Öğeler arasında boşluk */
                width: 99%;
                /* Konteynerin genişliği */
                padding: 0px;
                /* İç boşluk */
                z-index: 1000;
                /* Diğer içeriklerin üzerinde olması için */
            }


            .flex-grow {
                flex-grow: 1;
                /* Mevcut alanı kaplar */
                text-align: center;
                /* Metni ortalar */
                min-width: 100px;
                /* Minimum genişlik (isteğe bağlı) */
            }

            #previous-button-s3,
            #next-button-s3 {
                position: static;
                font-size: 20px;

                /* fixed yerine static yapın */
                width: 15%;
                height: 60px;
                background-color: #085dc4;
                color: white;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                z-index: 1000;

                /* Metni yatayda ve dikeyde ortala */
                display: flex;
                justify-content: center;
                /* Yatayda ortala */
                align-items: center;
                /* Dikeyde ortala */

                /* Çift katmanlı gölge: koyu + hafif beyaz */
                box-shadow:
                    0 6px 12px rgba(255, 255, 255, 0.5),
                    /* Ana koyu gölge */
                    0 0 10px rgba(255, 255, 255, 0.38);
                /* Hafif beyaz dış parlama */

                transition: box-shadow 1s ease, transform 0.2s ease;
            }


            .questionS3.no-image {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
            }

            .questionS3.no-image p,
            .questionS3.no-image .answers {
                width: 100%;
                text-align: center;
                margin-left: 0;
            }

            .questionS3.no-image .feedback-container {
                width: 100%;
                margin-left: 0;
            }


        }

        @media (max-width: 767px) {
            .questionS3 {
                grid-template-columns: 1fr;
                display: flex;
                flex-direction: column;
                align-items: center;
                position: relative;
                max-width: 98% !important;
                /* !important ekledim */
                width: 98% !important;
                /* Genişliği %98 olarak ayarladım */
                top: 40px;
                padding-bottom: 20px;
                margin-bottom: 200px;
            }

            .questionS3 p,
            .questionS3 .answers {
                width: 95%;
                text-align: center;
                align-self: center;
                margin: 0 auto;
                /* Yatayda ortala */
            }

            .questionS3 .answers {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-top: 0;
            }

            .questionS3 p {
                margin-top: 5px;
                margin-bottom: 5px;
            }

            .questionS3 .question-image {
                max-width: 100%;
            }

            .questionS3 .question-video {
                max-width: 100%;


            }

            /* Mobil için grid-4 özel stilleri */
            .questionS3 .image-container.grid-4 {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
                padding: 10px;
                overflow: visible;
            }

            .questionS3 .question-image-t4 {
                max-width: 100%;
                height: auto;
                margin: 10px 0;
                display: block;
            }

            .cevapSecenegi-s3 {
                width: 95%;
                /* Şıkların genişliği %90 */
                margin-bottom: 10px;
                /* Şıklar arasında boşluk */
                text-align: left;
                /* Metni sola hizalar */
            }

            #button-container {
                position: fixed;
                /* Konteyneri sabitle */
                bottom: 0;

                /* Sayfanın altından 11% yukarıda */
                left: 1%;
                /* Sol kenardan 1% boşluk bırak */
                right: 1%;
                /* Sağ kenardan 1% boşluk bırak */
                display: flex;
                align-items: center;
                /* Dikeyde ortala */
                justify-content: space-between;
                /* Butonlar ve h2 arasında eşit boşluk bırak */
                gap: 10px;
                /* Öğeler arasında boşluk */
                width: 99%;
                /* Konteynerin genişliği (100% - 1% sol - 1% sağ) */
                padding: 0px;
                /* İç boşluk */
                z-index: 1000;
                /* Diğer içeriklerin üzerinde olması için */
            }

            .flex-grow {
                flex-grow: 1;
                /* Mevcut alanı kaplar */
                text-align: center;
                /* Metni ortalar */
                min-width: 100px;
                /* Minimum genişlik (isteğe bağlı) */
            }

            #previous-button-s3,
            #next-button-s3 {
                position: static;
                width: 20%;
                height: 11.73vh;
                background-color: #085dc4;
                color: white;
                font-size: 14px;
                border: 1px solid #085dc4;
                border-radius: 8px;
                cursor: pointer;
                z-index: 1000;

                display: flex;
                justify-content: center;
                align-items: center;

                /* Çift katmanlı gölge: koyu + hafif beyaz */
                box-shadow:
                    0 6px 12px rgba(255, 255, 255, 0.5),
                    /* Ana koyu gölge */
                    0 0 10px rgba(255, 255, 255, 0.938);
                /* Hafif beyaz dış parlama */

                transition: box-shadow 1s ease, transform 0.2s ease;
            }

            /* Butona basıldığında gölgeyi azaltalım */
            #previous-button-s3:active,
            #next-button-s3:active {
                box-shadow:
                    0 3px 6px rgba(0, 0, 0, 0.4),
                    0 0 6px rgba(255, 255, 255, 0.3);
                transform: translateY(1px);
            }






            .show-rectangle {
                display: block;
            }

            /* Drag-and-drop öğeleri için özel stil */
            .drag-drop-container {
                width: 98% !important;
                /* Genişliği %98 olarak ayarladım */
                max-width: 98% !important;
                /* Genişliği %98 olarak ayarladım */
                margin: 0 auto;
            }

            .box,
            .target {
                width: 12%;
                height: 14.9%;
            }


        }

        #finalResultContainerId {
            width: 70%;
            /* Masaüstünde ekranın %80'ini kapla */
            max-width: 70%;
            margin: 50px auto 0 auto;
            /* Üstte 100px boşluk bırak, yatayda ortala */
            padding-bottom: 100px;
        }

        #finalResultContainerId h2,
        #finalResultContainerId p {
            text-align: center;
            /* İçerikleri ortala */
        }

        /* Mobil versiyon için özel ayarlar */
        @media (max-width: 768px) {
            #finalResultContainerId {
                width: 90%;
                /* Mobilde ekranın %95'ini kapla */
                max-width: 90%;
                margin-left: auto;
                margin-right: auto;
            }
        }




        #demo {
            width: 800px;
            height: 400px;
            background-color: yellow;
            position: relative;
        }

        .box {
            background-color: white;
            text-align: center;
            font-size: 2.5vw;
            width: 12%;
            height: 14.9%;
            color: orange;
            position: absolute;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
            /* Yumuşak gölge efekti */
            /* 2px turuncu border ekleyelim */
            border: 4px solid orange;
        }


        @media (max-width: 768px) {
            .box {
                background-color: white;
                text-align: center;
                font-size: 5.2vw;
                width: 12%;
                height: 14.9%;
                color: orange;
                position: absolute;
                border-radius: 50%;
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
                /* Yumuşak gölge efekti */

                /* 2px turuncu border ekleyelim */
                border: 4px solid orange;
            }

        }


        .target {
            background-color: orange;
            text-align: center;
            font-size: 2.5vw;
            width: 12%;
            height: 14.9%;
            color: white;
            position: absolute;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            /* box-shadow özelliği kaldırıldı */
        }


        .target {
            background-color: transparent;
            color: black;
        }


        .target {
            background-color: transparent;
            color: black;
        }

        .drag-drop-container {
            position: relative;
            width: 100%;
            height: auto;
            transform-origin: top left;
            transform: scale(1);

        }

        .drag-drop-container img {
            width: 100%;
            height: auto;
            object-fit: contain;
            display: block;
            /* Alt boşluğu kaldırır */
        }



        .highlight {
            background-color: rgba(255, 165, 0, 0.5);
        }

        /*//////////////////////////////////////Bölüm-3//////////////////////////////////////////////////////////////////////////////////////////////////////////////*/




        .selectedAnswer {
            background-color: yellow;
        }

        /*.feedback-container {
      border: 5px solid #000;
      padding: 10px;
      margin-top: 10px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    } */

        .feedback-text {
            margin: 0;
            flex: 1;
            resize: none;
            font-style: italic;
            /* Metni italik yapmak için bu satırı ekledik */
            font-size: 13px;
            padding: 5px;

            /* Metin boyutunu ayarlamak için istediğiniz değeri belirleyin */

        }


        .feedback-image {
            width: 5px;
            height: 5px;
            margin-left: 10px;
            margin-right: 30px;
            border: 1px solid;
        }

        .hidden {
            display: none !important;
        }

        .disabled2 {
            pointer-events: none;
            /*Burada "none"ı "auto" yapsak birinci bölümde feedback enable olur*/
            opacity: 0.6;
        }

        .disabled3 {
            pointer-events: none;
            /*Burada "none"ı "auto" yapsak birinci bölümde feedback enable olur*/
            opacity: 0.6;
        }

        .disabled-answer {

            background-color: lightgray;
            color: rgb(84, 16, 232);
        }

        .cevapSecenegi .disabled {
            opacity: 0.1;
            cursor: not-allowed;
            pointer-events: none;
        }






        .correct-answer::after {
            content: " ✔️";
            color: rgb(11, 207, 11);
            font-weight: bold;
        }

        .wrong-answer::after {
            content: " ❌";
            color: red;
            font-weight: bold;
        }

        .correct {
            background-color: lightgray;
            color: rgb(11, 207, 11);
        }

        .selected-correct {
            background-color: rgb(11, 207, 11);
            color: white;
        }

        .selected-wrong {
            background-color: red;
            color: white;
        }


        /*Bu kod parçası şu an etkisiz  kimi görünür*/
        .feedback-container {
            border: 6px solid #ed0e0e;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .feedback-image {
            max-width: 100%;
            height: auto;
        }

        .selected {
            border: 2px solid rgb(0, 255, 94);
        }

        .answer-input {
            color: black;
            width: 200px;
            /* İstediğiniz genişliği buraya ekleyin */
            height: 40px;
            /* İstediğiniz yüksekliği buraya ekleyin */
            padding: 5px;
            /* İç boşluk eklemek için */
            font-size: 20px;
            /* Yazı boyutunu ayarlamak için */
            box-sizing: border-box;
            /* Padding ve border dahil genişlik ve yükseklik */
            /* Solgun renk */
        }

        .placeholder-text {
            color: #ccc;

            /* Daha solgun renk */
        }



        .cevapSecenegiS2 {
            display: block;
            margin-bottom: -10px;
            /* Seçenekler arasındaki boşluğu ayarlar */
            border: 1px solid #cecece;
            padding: 10px;
            cursor: pointer;
            border-radius: 10px;
            background-color: rgb(239, 239, 239);
            text-align: left;
            /* İkinci bölümde cevap seçeneginde Metinlerin sola hizalanmasını sağlar */
            width: 95%;
            /* Seçeneklerin tam genişlikte olmasını sağlar */
        }





        .selectedAnswer {
            background-color: #007bff;
            color: white;
        }




        #countdown {
            /* margin-top: -86px;
    margin-bottom: -30px; */
            display: flex;
            justify-content: center;
            width: 100px;

            /*İkinci bölümde zamanlayıcının yerini degiştirmek*/
            position: absolute;
            top: -30px;
            /* Elemanı yatayda ortalamak için */
            left: 50%;
            transform: translateX(-50%);
        }


        #quiz-header {
            height: 0px;
            /* Boş alan yüksekliği */
            overflow: hidden;
            /* Boş alanın kaydırılmasını engeller */
        }

        .hidden {
            display: none !important;
        }

        .question-block {
            cursor: pointer;
        }




        /*================================================01234====================================================*/

        /*================================================01234====================================================*/

        /*================================================01234====================================================*/





        .selected {
            border: 2px solid rgb(76, 0, 255);
        }

        .answer-input {
            color: black;
        }

        .placeholder-text {
            color: #ccc;
        }



        .selectedAnswer {
            background-color: #007bff;
            color: white;
        }


        /* Saatın pozisyonunu ayarlama */
        #app-s3 {
            position: fixed;
            top: -20px;
            /* Üst kenardan 25px aşağıda */
            left: 50%;
            transform: translateX(-50%);
            /* Yatayda tam ortalamak için */
            margin: 0;
            /* Gereksiz marginleri kaldırdık */
            z-index: 10;
        }


        #quiz-header {
            height: 0px;
        }

        .hidden {
            display: none !important;
        }

        .question-block-s3 {
            cursor: pointer;
        }

        .quiz-container-s3 {
            position: relative;
            /* margin-top: -40px; */
        }

        /*================================================01234====================================================*/

        /*================================================01234====================================================*/

        .deactivated {
            background-color: #ccc;
            cursor: not-allowed;
        }








        #result {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
        }


        .base-timer,
        .base-timer_S3 {
            position: relative;
            width: 100px;
            height: 100px;
        }

        .base-timer__svg,
        .base-timer__svg_S3 {
            transform: scaleX(-1);
        }

        .base-timer__circle,
        .base-timer__circle_S3 {
            fill: #000000;
            stroke: none;
        }

        .base-timer__path-elapsed,
        .base-timer__path-elapsed_S3 {
            stroke-width: 4px;
            stroke: grey;
        }

        .base-timer__path-remaining,
        .base-timer__path-remaining_S3 {
            stroke-width: 4px;
            stroke-linecap: round;
            transform: rotate(90deg);
            transform-origin: center;
            transition: 1s linear all;
            fill-rule: nonzero;
            stroke: currentColor;
        }

        .base-timer__path-remaining.green,
        .base-timer__path-remaining_S3.green {
            color: rgb(65, 184, 131);
        }

        .base-timer__path-remaining.orange,
        .base-timer__path-remaining_S3.orange {
            color: orange;
        }

        .base-timer__path-remaining.red,
        .base-timer__path-remaining_S3.red {
            color: red;
        }



        #endMessage3-S3 {
            margin-left: 70px;
            margin-right: 70px;
        }

        /* Mobile version - applies when screen width is 768px or less */
        @media (max-width: 768px) {
            #endMessage3-S3 {
                margin-left: 10px;
                margin-right: 10px;
            }
        }

        #proceedSection3End {
            margin-top: 50px;
        }

        #proceedSection3End p {
            margin-left: 80px;
            margin-right: 80px;
        }

        #viewResultContainerId {
            margin-top: 120px;
        }

        #viewResultContainerId p,
        h2,
        h3 {
            margin-bottom: 15px;
            font-size: 22px;
            margin-top: 15px;
        }

        #failOrPassEndS3 {
            display: none;
            margin: 0 auto;
            margin-bottom: 20px !important;
        }
    </style>
</head>

<body>

    <div class="overlay"></div>
    <!-- Diğer içerikler burada -->
    <div class="coordinateDisplay">X: 0, Y: 0</div>



    <!-- SECTION-1 ve teste başla düğmeleri -->
    <button id="quizButton1" onclick="startQuizAndFullscreen()">QUIZ-1</button>

    <!-- Mesaj alanı -->
    <div id="messageArea">
        <h4>THEORY EXAM EXPLANATION</h4>
        <p>
            Welcome to the theory exam for passenger cars. This theory exam consists
            of three sections: hazard perception, knowledge and insight.
        </p>
        <p>
            To pass this exam, you must pass each section individually. After the
            exam, you will immediately see whether you passed or failed, and how
            well you performed in each section.
        </p>
        <h4>Good luck with the exam!</h4>
    </div>

    <!-- Yeni eklenen mesaj alanı -->
    <div id="additionalMessage">
        <h4>EXPLANATION OF HAZARD PERCEPTION</h4>
        <p>
            In this section, you will have 8 seconds to answer each question. As
            long as the timer is running, you can still answer the question. If you
            do not answer in time, the question will be marked wrong. You cannot go
            back to the previous question.
        </p>
        <p>
            Each question will present several choices for how you think you should
            react to certain scenarios:<br />- Brake.<br />- Release accelerator.<br />-
            Nothing.<br />
        </p>
        <p>
            For each question, assume you are the driver. On the dashboard, you can
            see the speed at which you are driving. If you are changing direction,
            you will see an indicator. You can see the traffic behind you in the
            rear-view mirror.
        </p>
        <p>You will now begin the hazard perception section.</p>
        <p>This section consists of 25 questions, of which you must answer at least 13 correctly.</p>
        <h4> Good luck!</h4>
    </div>


    <div id="buttonContainer">
        <button id="startButton" onclick="showProceedButton()">
            START THE THEORY EXAM
        </button>
        <button id="proceedButton" onclick="startQuiz()">PROCEED</button>
    </div>

    <!-- Yeni eklenti -->
    <!-- <button id="lock-quiz-button" class="hidden">
    Quiz'i Kitle ve İşaretleri Ekle
  </button> -->

    <!-- Quiz alanını içeren bir div oluşturalım -->
    <div id="quizAlani" style="display: none">
        <!-- Soru alanı -->
        <div id="soruAlani">
            <!-- Zamanlayıcı alanı -->
            <div id="timerDiv">
                <div id="app"></div>
            </div>
            <div id="cevaplarContainer" class="questionContainer">
                <div id="soruResmi"></div>
                <!-- Soru resmi alanı -->
                <div id="cevaplar"></div>
            </div>

            <div id="buttonDiv">
                <button id="previousButton" class="navigateButton hidden" onclick="prevQuestion()">
                    Previous
                </button>
                <!--Bu kismi kapatiyorum ki Sorubashligi-->
                <div class="flex-grow">
                    <h2 id="soruBasligi"></h2>
                </div>
                <button id="nextButton" class="navigateButton" onclick="nextQuestion()">
                    Next
                </button>
            </div>
        </div>
    </div>

    <!-- Gri dikdörtgen -->
    <div id="grayRectangle" class="hidden"></div>

    <!-- Sonuç gösterme alanı -->
    <div id="sonucAlani" style="display: none">
        <h2>Quiz Sonucu</h2>
        <div id="sonuc"></div>
    </div>

    <!-- Section 2 -->
    <!-- <div id="quiz-header"></div> -->
    <!-- Boş alan -->

    <div id="countdown" class="base-timer hidden">
        <svg class="base-timer__svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <g class="base-timer__circle">
                <!-- Yarıçapı 17 olarak değiştiriyoruz -->
                <circle class="base-timer__path-elapsed" cx="50" cy="50" r="17"></circle>
                <path id="base-timer-path-remaining-s2" stroke-dasharray="107" class="base-timer__path-remaining green"
                    d="
                    M 50, 50
                    m -17, 0
                    a 17,17 0 1,0 34,0
                    a 17,17 0 1,0 -34,0" />
            </g>
        </svg>
        <span id="base-timer-label-s2" class="base-timer__label"></span>
    </div>

    <div class="quiz-container">
        <!-- Quiz içeriği buraya eklenecek -->
    </div>
    <div id="button-container">
        <!-- <button id="start-button" class="hidden" onclick="startQuizS2()">Section2</button> -->
        <button id="previous-button" class="hidden" onclick="previousQuestion()">
            Previous
        </button>
        <button id="next-button" class="hidden" onclick="nextQuestionS2()">
            Next
        </button>
    </div>
    <!-- <button id="lock-quiz-button-s-2" class="hidden">
    Quiz'i Kitle ve İşaretleri Ekle
  </button> -->
    <div id="proceedSection3" class="center-button hidden" style="flex-direction: column; gap: 10px;">
        <h4>END KNOWLEDGE</h4>
        <p id="answeredQuestionsS2End" class="knowledge-explanation"></p>
        <p id="unAnsweredQuestionsS2End" class="knowledge-explanation"></p>
        <h4>OVERVIEW</h4>
        <p class="knowledge-explanation">Use this overview to quickly go to a question. By selecting a box you go
            directly to the question.</p>

        <div id="endMessage" style="display: flex; flex-wrap: wrap;"></div>
        <button id="proceedToSecction3Button" onclick="startSection3Questions()">PROCEED</button>
    </div>

    <!-- 3. Bölümü Başlatan Mesaj ve Yeni Düğme -->
    <div id="startMessage" style="display:none;">
        <h4>TEORİ SINAVI - BİNEK ARAÇ</h4>
        <p class="start-insight">Sorular arasında ileri ve geri geçiş yapabilirsiniz. Bu bölüm için 30 dakikanız vardır.
            Zaman çubuğu ilerlediği sürece, sorular arasında geçiş yapabilir, atlayabilir, cevaplayabilir veya cevapları
            düzeltebilirsiniz.
        </p>
        <p class="start-insight">Genişletilmiş veya bireysel bir sınav yapıyorsanız, hatta 45 dakikanız olur.
            Ekranda bir ders aracı görüyorsanız, siz sürücüsünüz demektir.</p>
        <p class="start-insight">Bu bölümde 50 soru alacaksınız ve bunlardan en az 44 tanesini doğru yanıtlamanız
            gerekir.
            Tam olarak cevaplanmayan sorular yanlış sayılır.</p>
        <h4 class="start-insight">İyi şanslar!</h4>
        <div class="button-container">
            <button id="startSection3Button" onclick="startQuizS3()">İLK SORUYA GEÇ</button>
        </div>
    </div>













    <!-- Section 3 -->
    <!-- <div id="quiz-header"></div> -->

    <!-- Zamanlayıcı başlangıçta gizli -->
    <div id="app-s3" class="hidden"></div>
    <!-- Zamanlayıcı başlangıçta gizli -->
    <div class="quiz-container-s3"></div>
    <div id="button-container">
        <button id="previous-button-s3" class="hidden" onclick="previousQuestionS3()">Önceki</button>
        <div class="flex-grow">
            <h2 id="soruNumarasiS3"></h2> <!-- Yeni ID: soruNumarasiS3 -->
        </div>
        <button id="next-button-s3" class="hidden" onclick="nextQuestionS3()">Sonraki</button>
    </div>

    <div id="proceedSection3End" class="center-button hidden" style="flex-direction: column; gap: 10px;">
        <div class="button-container">
            <h2>Sınavın Son Aşaması</h2>
        </div>
        <p id="answeredQuestionsS3End"></p>
        <p id="unAnsweredQuestionsS3End"></p>
        <div id="endMessage3-S3" style="display: flex; flex-wrap: wrap;"></div>
        <div class="button-container">
            <button id="proceedToResultDivBtn" onclick="proceedToResultDiv()">İLERLE</button>
        </div>
    </div>








    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="noButtonClicked('section2')">&times;</span>
            <h2>Proceed?</h2>
            <p>You can not go back after this.</p>
            <button class="popup-btn" onclick="yesButtonClicked('section2')" id="yesBtn">Yes</button>
            <button class="popup-btn" onclick="noButtonClicked('section2')" id="noBtn">No</button>
        </div>
    </div>

    <div id="myModalS3" class="modal">
        <div class="modal-content">
            <span class="close" onclick="noButtonClicked('section3')">&times;</span>
            <h2>İlerlemek istediğinizden emin misiniz?</h2>
            <p>Bu adımdan sonra geri dönüş yapamazsınız.</p>
            <button class="popup-btn" onclick="yesButtonClicked('section3')" id="yesBtn">Evet</button>
            <button class="popup-btn" onclick="noButtonClicked('section3')" id="noBtn">Hayır</button>
        </div>
    </div>

    <div id="viewResultContainerId" class="viewResultContainer hidden">
        <p>Sınava katıldığınız için teşekkür ederiz!</p>
        <hr />
        <h2 id="failOrPass"></h2>
        <div>
            <img id="failOrPassIcon" alt="failOrPass" src="" />
        </div>
        <h3 id="endResult"></h3>
        <button id="viewResult" onclick="finalResultShow()">Sonuçlarımı Görüntüle!</button>
    </div>


    <div id="finalResultContainerId" class="finalResultContainer hidden">
        <h2>Cevapları Gözden Geçir</h2>
        <p>Aşağıda sınav sonuçlarını bulabilirsiniz. İlgili soruya gitmek ve sonuçlarınızı gözden geçirmek için bir
            kareye tıklayabilirsiniz.</p>
        <div id="resultS3">
            <h2>Cevaplarınızı Kontrol Edin</h2>
            <img id="failOrPassEndS3" alt="failOrPassEnd" style="height: 50px" src="" />
        </div>
    </div>




    <!-- HTTP -->
    <script src="http://js.moatads.com/triplelift879988051105/moatad.js"></script>

    <!-- HTTPS -->
    <script src="https://js.moatads.com/triplelift879988051105/moatad.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.0/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.0/Draggable.min.js"></script>

    <script>
        var viewResult = false;
        var soruBankasi = []; // Soru bankası
        var soruIndex = 0; // Şu anki soru index'i
        var siraliSorular = []; // Rastgele sırayla sorular
        var cevapDurumu = []; // Soruların cevap durumu
        var dogruCevap = []; // Doğru cevaplar
        var dogruYanlisDurumu = []; // Soruların doğru, yanlış, cevaplanmamış durumu
        var secilenCevaplar = []; // Kullanıcının seçtiği cevaplar
        var timerInterval; // Zamanlayıcı
        var timerPausedByGoToQuestion = false; // Bayrak (flag)
        var timerIntervalS3;


        var correctAnswerS1 = 0;
        var correctAnswerS2 = { questions: [], correct: 0, unanswer: 0, answer: 0 };
        var correctAnswerS3 = { questions: [], correct: 0, unanswer: 0, answer: 0 };

        // JSON formatındaki soru bankası dosyasının URL'si
        var soruBankasiURL =
            "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_2392d1f13b494112a9d25d16aed86ae1.json";

        // SECTION-1 butonuna tıklandığında
        function showMessage() {
            document.getElementById("messageArea").style.display = "block";
            document.getElementById("startButton").style.display = "block";

            document.getElementById("quizButton1").style.display = "none"; //SECTION-1 düğmesini gizle
        }

        // "START THE THEORY EXAM" butonuna tıklandığında "PROCEED" butonunu göster ve mesajı görüntüle
        function showProceedButton() {
            document.getElementById("messageArea").style.display = "none";
            document.getElementById("startButton").style.display = "none";
            document.getElementById("proceedButton").style.display = "block";
            document.getElementById("additionalMessage").style.display = "block"; // Mesajı göster
        }

        // "PROCEED" butonuna tıklandığında quiz'i başlat ve mesajı gizle
        function startQuiz() {
            document.getElementById("proceedButton").style.display = "none";
            document.getElementById("quizAlani").style.display = "block";
            document.getElementById("additionalMessage").style.display = "none"; // Mesajı gizle

            // Zamanlayıcıyı göster
            document.getElementById("timerDiv").style.display = "block";
            startTimer(); // Zamanlayıcıyı başlat

            fetch(soruBankasiURL)
                .then((response) => response.json())
                .then((data) => {
                    soruBankasi = data;
                    // Soruları rastgele sıraya yerleştir
                    siraliSorular = shuffleArray(soruBankasi).slice(0, 25); // İlk 25 soruyu al
                    cevapDurumu = Array(siraliSorular.length).fill(false); // Tüm cevapları başlangıçta false olarak işaretle
                    dogruYanlisDurumu = Array(siraliSorular.length).fill("unanswered"); // Tüm soruları başlangıçta cevaplanmamış olarak işaretle
                    secilenCevaplar = Array(siraliSorular.length).fill(null); // Tüm soruları başlangıçta boş olarak işaretle
                    showNextQuestion();
                })
                .catch((error) => {
                    console.error("Soru bankası dosyası alınamadı: ", error);
                });

            // Gri dikdörtgeni göster
            const grayRectangle = document.getElementById('grayRectangle');
            if (grayRectangle) {
                console.log("Gri dikdörtgenin durumu:", grayRectangle); // Gri dikdörtgenin öğesinin kontrolü
                grayRectangle.classList.remove('hidden');
                grayRectangle.classList.add('show-rectangle'); // Gri dikdörtgeni görünür hale getir
                console.log("Gri dikdörtgen gösterildi.");
            } else {
                console.warn("Gri dikdörtgen bulunamadı!");
            }
        }

        /////////////////////////////////////////////////////////////////////////////////////////
        /////////////////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////////////////

        // Mevcut onclick olayını saklayın
        const oldOnClick = document.getElementById('viewResult').onclick;

        // Yeni onclick olayını tanımlayın
        document.getElementById('viewResult').onclick = function (event) {
            // Mevcut işlevselliği çağırın (finalResultShow fonksiyonu)
            if (oldOnClick) {
                oldOnClick(event);
            }

            // Yeni işlevselliği buraya ekleyin
            const completedTestNumber = 2001; // TEST1 tamamlandı

            // Frontend'e mesaj gönderme işlemi
            const wixOrigin = 'https://www.examtheorie.nl';
            try {
                window.parent.postMessage({ action: 'updateProgress', testNumber: completedTestNumber }, wixOrigin);
                console.log("Frontend'e mesaj gönderildi.");
            } catch (error) {
                console.error("Mesaj gönderilirken hata oluştu:", error);
            }
        };

        ////////////////////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////




        // Zamanlayıcıyı başlatan fonksiyon
        function startTimer() {
            // Zamanlayıcıyı başlatma kodu buraya gelecek
            console.log("Zamanlayıcı başlatıldı");
        }

        // Soruları rastgele sıraya yerleştirmek için
        function shuffleArray(array) {
            let shuffledArray = array.slice();
            for (let i = shuffledArray.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1));
                let temp = shuffledArray[i];
                shuffledArray[i] = shuffledArray[j];
                shuffledArray[j] = temp;
            }
            return shuffledArray;
        }

        // Sonraki soruya geçmek için
        function nextQuestion() {
            clearTimeout(timerInterval); // Timer'ı sıfırla
            checkAnswer(); // Cevabı kontrol et
            if (soruIndex < siraliSorular.length - 1) {
                soruIndex++;
                showNextQuestion();
            } else {
                if (viewResult) {
                    document.getElementById("quizAlani").style.display = "none"; // Quiz alanını gizle
                    document.getElementById('finalResultContainerId').classList.remove('hidden');
                } else {
                    quizBitir();
                }
            }
        }

        // Önceki soruya geçmek için
        function prevQuestion() {
            clearTimeout(timerInterval); // Timer'ı sıfırla
            if (soruIndex > 0) {
                soruIndex--;
                showNextQuestion();
            }
        }

        // Şu anki soruyu göstermek için güncellenmiş fonksiyon
        function showNextQuestion(timeStarted = true) {
            clearTimeout(timerInterval); // Mevcut timer'ı temizleyin (önemli!)
            let soru = siraliSorular[soruIndex];
            document.getElementById("soruBasligi").innerText =
                "QUESTION " +
                (soruIndex + 1) +
                " OF " +
                siraliSorular.length +
                ": " +
                soru.soru;

            // Soru resmini göster
            document.getElementById("soruResmi").innerHTML =
                '<img src="' + soru.resim + '" alt="Soru Resmi">';

            let cevaplarHTML = "";
            soru.cevaplar.forEach(function (cevap, index) {
                cevaplarHTML +=
                    '<label class="cevapSecenegi"><span class="resultIcon"></span><input type="radio" name="cevap" value="' +
                    cevap +
                    '" onclick="highlightSelected(this)">' +
                    cevap +
                    '</label>';
            });
            document.getElementById("cevaplar").innerHTML = cevaplarHTML;

            // Eğer ilgili soru daha önce cevaplandıysa işaretli cevabı göster
            if (secilenCevaplar[soruIndex] !== null) {
                let cevaplar = document.getElementsByName("cevap");
                for (var i = 0; i < cevaplar.length; i++) {
                    if (cevaplar[i].value === secilenCevaplar[soruIndex]) {
                        cevaplar[i].checked = true;
                        highlightSelected(cevaplar[i]); // Seçili cevabı vurgula
                    }
                }
            }

            let checkDisabled = document.getElementById("cevaplarContainer");
            if (checkDisabled.classList.contains('disabled')) {
                lockQuizQuestionsPreview();
            }

            // Timer'ı başlatmak sadece timeStarted true olduğunda gerçekleşecek
            if (timeStarted && !timerPausedByGoToQuestion) {
                startTimer();
            }
        }

        // Timer'ı başlatmak için güncellenmiş fonksiyon
        function startTimer() {
            const FULL_DASH_ARRAY = 107;
            const WARNING_THRESHOLD = 6;
            const ALERT_THRESHOLD = 2;

            const COLOR_CODES = {
                info: { color: "green" },
                warning: { color: "orange", threshold: WARNING_THRESHOLD },
                alert: { color: "red", threshold: ALERT_THRESHOLD },
            };

            const TIME_LIMIT = 8;
            let timePassed = 0;
            let timeLeft = TIME_LIMIT;
            let remainingPathColor = COLOR_CODES.info.color;

            document.getElementById("app").innerHTML = `
    <div class="base-timer">
        <svg class="base-timer__svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <g class="base-timer__circle">
                <circle class="base-timer__path-elapsed" cx="50" cy="50" r="17"></circle>
                <path
                    id="base-timer-path-remaining"
                    stroke-dasharray="${FULL_DASH_ARRAY}"
                    class="base-timer__path-remaining ${remainingPathColor}"
                    d="
                    M 50, 50
                    m -17, 0
                    a 17,17 0 1,0 34,0
                    a 17,17 0 1,0 -34,0
                    "
                ></path>
            </g>
        </svg>
        <span id="base-timer-label" class="base-timer__label">${formatTime(
                timeLeft
            )}</span>
    </div>`;


            timerInterval = setInterval(() => {
                timePassed += 1;
                timeLeft = TIME_LIMIT - timePassed;
                document.getElementById("base-timer-label").innerHTML =
                    formatTime(timeLeft);
                setCircleDasharray();
                setRemainingPathColor(timeLeft);

                if (timeLeft === 0) {
                    clearInterval(timerInterval);
                    nextQuestion();
                }
            }, 1000);

            function formatTime(time) {
                const minutes = Math.floor(time / 60);
                let seconds = time % 60;

                if (seconds < 10) {
                    seconds = `0${seconds}`;
                }

                return `${minutes}:${seconds}`;
            }

            function setRemainingPathColor(timeLeft) {
                const { alert, warning, info } = COLOR_CODES;
                if (timeLeft <= alert.threshold) {
                    document
                        .getElementById("base-timer-path-remaining")
                        .classList.remove(warning.color);
                    document
                        .getElementById("base-timer-path-remaining")
                        .classList.add(alert.color);
                } else if (timeLeft <= warning.threshold) {
                    document
                        .getElementById("base-timer-path-remaining")
                        .classList.remove(info.color);
                    document
                        .getElementById("base-timer-path-remaining")
                        .classList.add(warning.color);
                }
            }

            function calculateTimeFraction() {
                const rawTimeFraction = timeLeft / TIME_LIMIT;
                return rawTimeFraction - (1 / TIME_LIMIT) * (1 - rawTimeFraction);
            }

            function setCircleDasharray() {
                const circleDasharray = `${calculateTimeFraction() * FULL_DASH_ARRAY
                    } 107`;
                document
                    .getElementById("base-timer-path-remaining")
                    .setAttribute("stroke-dasharray", circleDasharray);
            }
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }


        function lockQuizQuestionsPreview() {
            console.log("Siralı Sorular: ", siraliSorular);
            console.log("Şu anki Soru Index: ", soruIndex);

            if (soruIndex >= siraliSorular.length || soruIndex < 0) {
                console.error("Şu anki soru tanımlı değil! soruIndex geçerli bir indeks değil.");
                return;
            }

            let soru = siraliSorular[soruIndex];
            console.log("Şu anki Soru: ", soru);
            console.log("Doğru Cevap: ", soru.dogruCevap);

            let labels = document.getElementsByClassName("cevapSecenegi");
            console.log("Cevap seçenekleri getirildi:", labels);

            let checkAnswerImage = [];

            for (let i = 0; i < labels.length; i++) {
                const label = labels[i];
                const input = label.querySelector("input");
                const answer = input.value.trim() === soru.dogruCevap.trim();
                let markerSpan = label.querySelector(".resultIcon");
                if (!markerSpan) {
                    markerSpan = document.createElement("span");
                    markerSpan.className = "resultIcon";
                    markerSpan.style.marginLeft = "10px";
                    label.appendChild(markerSpan);
                }

                // Doğru ve yanlış cevapları işaretleme ve renkleri güncelleme
                if (answer) {
                    markerSpan.textContent = "✔️";
                    markerSpan.style.color = "rgb(11, 207, 11)";
                    if (input.checked) {
                        checkAnswerImage.push('correctAnswer');
                        label.classList.add("correctAnswer");
                        label.classList.remove("unselectedAnswer");
                        label.classList.remove("incorrectAnswer");
                        console.log(`Cevap ${i + 1}: ✔️ Doğru olarak işaretlendi.`);
                    } else {
                        checkAnswerImage.push('unselectedAnswer');
                        label.classList.add("unselectedAnswer");
                        label.classList.remove("correctAnswer");
                        label.classList.remove("incorrectAnswer");
                        console.log(`Cevap ${i + 1}: ✔️ Doğru olarak işaretlendi ama seçilmedi.`);
                    }
                } else {
                    markerSpan.textContent = "❌";
                    markerSpan.style.color = "red";
                    if (input.checked) {
                        checkAnswerImage.push('incorrectAnswer');
                        label.classList.add("incorrectAnswer");
                        label.classList.remove("correctAnswer");
                        label.classList.remove("unselectedAnswer");
                        console.log(`Cevap ${i + 1}: ❌ Yanlış olarak işaretlendi.`);
                    } else {
                        checkAnswerImage.push('unselectedAnswer');
                        label.classList.add("unselectedAnswer");
                        label.classList.remove("correctAnswer");
                        label.classList.remove("incorrectAnswer");
                        console.log(`Cevap ${i + 1}: ❌ Yanlış olarak işlendi ama seçilmedi.`);
                    }
                }

                input.disabled = true;
            }

            // Zamanlayıcıyı gizle
            const timerDiv = document.getElementById("timerDiv");
            if (timerDiv) {
                timerDiv.style.display = "none";
            }

            // Soru alanını yukarı kaydır
            const soruAlani = document.getElementById("soruAlani");
            if (soruAlani) {
                soruAlani.style.marginTop = "25px"; // Yukarı kaydırmak için margin-top değerini ayarlayın
            }

            // Quiz alanına padding-bottom ekle
            const quizAlani = document.getElementById("quizAlani");
            if (quizAlani) {
                quizAlani.style.paddingBottom = "200px"; // Alt tarafa 200px padding ekler
            }


            let divFeedback = document.getElementById("cevaplar");

            const feedbackDiv = document.createElement("div");
            feedbackDiv.className = "feedback-container";
            feedbackDiv.style.border = "1px solid #848586";  // Geri bildirim kutusunun kenarlığı
            feedbackDiv.style.padding = "10px";
            feedbackDiv.style.marginTop = "1px";
            feedbackDiv.style.marginBottom = "10px";
            feedbackDiv.style.display = "flex";
            feedbackDiv.style.alignItems = "center";
            feedbackDiv.style.justifyContent = "center";
            feedbackDiv.style.width = "95%"; // Cevap seçeneklerinin genişliği ile eşleşir
            feedbackDiv.style.maxWidth = "100%";
            feedbackDiv.style.borderRadius = "10px"; // Köşeleri daha yuvarlak yapmak için
            feedbackDiv.style.boxShadow = "0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)"; // Kabarık gölge efekti
            feedbackDiv.style.margin = "10px auto";  // Ortalamak için
            feedbackDiv.style.boxSizing = "border-box";



            const feedbackText = soru.feedback.metin;

            const feedbackTextBox = document.createElement("div");
            feedbackTextBox.className = "feedback-text";
            feedbackTextBox.textContent = feedbackText;
            feedbackTextBox.style.margin = "0";
            feedbackTextBox.style.flex = "1";
            feedbackTextBox.style.overflow = "auto"; // Gerekirse kaydırma izni ver
            feedbackTextBox.style.whiteSpace = "pre-wrap"; // Boşlukları koru ve metni sar
            feedbackDiv.appendChild(feedbackTextBox);

            const feedbackImage = document.createElement("img");
            feedbackImage.style.width = "30px";
            feedbackImage.style.height = "30px";
            feedbackImage.style.marginLeft = "5px";
            feedbackImage.style.border = "0px solid";

            let feedbackImageUrl;
            if (checkAnswerImage.includes('correctAnswer')) {
                feedbackImageUrl = soru.feedback.dogruCevapResim;
            } else if (checkAnswerImage.includes('incorrectAnswer')) {
                feedbackImageUrl = soru.feedback.yanlisCevapResim;
            } else if (checkAnswerImage.includes('unselectedAnswer')) {
                feedbackImageUrl = soru.feedback.cevaplanmamisResim;
            }

            feedbackImage.src = feedbackImageUrl;

            feedbackDiv.appendChild(feedbackImage);
            divFeedback.appendChild(feedbackDiv);
            console.log("lockQuizQuestionsPreview fonksiyonu tamamlandı.");
        }

        // Kilitleme kodunu ve sonucu ekleme
        function lockQuizQuestions() {
            console.log("lockQuizQuestions fonksiyonu çalıştırıldı.");
            let soruAlani = document.getElementById("soruAlani");
            let childDivs = soruAlani.children;
            for (let i = 0; i < childDivs.length; i++) {
                if (childDivs[i].id !== "buttonDiv" && childDivs[i].id !== "timerDiv") {
                    childDivs[i].classList.add("disabled");
                }
            }
            console.log("Soru alanındaki children div'ler kilitlendi.");

            let prevButton = document.getElementById("previousButton");
            prevButton.classList.remove("hidden");
            console.log("Previous butonu görünür hale getirildi.");

        }

        // document.getElementById("lock-quiz-button").addEventListener("click", function () {
        //   lockQuizQuestions();
        // });


        // Seçili cevabı vurgulamak için
        function highlightSelected(radio) {
            var labels = document.getElementsByClassName("cevapSecenegi");
            for (var i = 0; i < labels.length; i++) {
                labels[i].classList.remove(
                    "selectedAnswer",
                    "correctAnswer",
                    "incorrectAnswer",
                    "unselectedAnswer"
                );
            }
            radio.parentElement.classList.add("selectedAnswer");
        }


        // Cevapları kontrol etmek için
        function checkAnswer() {
            var cevaplar = document.getElementsByName("cevap");
            var currentQuestion = siraliSorular[soruIndex];
            for (var i = 0; i < cevaplar.length; i++) {
                if (cevaplar[i].checked) {
                    cevapDurumu[soruIndex] = true; // Cevaplandı olarak işaretle
                    secilenCevaplar[soruIndex] = cevaplar[i].value; // Seçili cevabı kaydet
                    if (
                        cevaplar[i].value.trim() === currentQuestion.dogruCevap.trim()
                    ) {
                        dogruYanlisDurumu[soruIndex] = "correct"; // Doğru olarak işaretle
                    } else {
                        dogruYanlisDurumu[soruIndex] = "incorrect"; // Yanlış olarak işaretle
                    }
                    return;
                }
            }
            // Cevaplanmadı olarak işaretle
            dogruYanlisDurumu[soruIndex] = "unanswered";
            cevapDurumu[soruIndex] = false;
            secilenCevaplar[soruIndex] = null; // Seçili cevabı boş olarak ayarla
        }

        // Quiz'i bitirme işlevi
        function quizBitir() {
            clearInterval(timerInterval); // Zamanlayıcıyı durdur
            var cevaplananSoruSayisi = cevapDurumu.filter(Boolean).length;
            var cevaplanmayanSoruSayisi = cevapDurumu.length - cevaplananSoruSayisi;

            var sonucHTML = "<h4>END HAZARD PERCEPTION</h4>";
            sonucHTML += "<p>Number of Answered Questions: " + cevaplananSoruSayisi + "</p>";
            sonucHTML += "<p>Number of Unanswered Questions: " + cevaplanmayanSoruSayisi + "</p>";
            sonucHTML += "<h4>OVERVIEW</h4>";
            sonucHTML += '<div id="cevaplanmaBlok" style="display: flex; flex-wrap: wrap; gap: 0px; margin-left: 20px;">'; // Flexbox yapısını ekle

            for (var i = 0; i < cevapDurumu.length; i++) {
                sonucHTML += '<div class="soruKare" style="background-color: ' + (cevapDurumu[i] ? "lightgray" : "transparent") + '">';
                sonucHTML += i + 1; // Soru numarasını karenin içine ekle
                sonucHTML += "</div>";
            }

            sonucHTML += '</div><div id="dogruYanlisBlok">';

            let sonucHTMLS1 = '<div><h2>Section 1</h2><img id="failOrPassEndS1" alt="failOrPassEnd" style="height: 50px" src="" /></div>';
            correctAnswerS1 = 0;

            for (let i = 0; i < dogruYanlisDurumu.length; i++) {
                let color;
                if (dogruYanlisDurumu[i] === "correct") {
                    color = "#00FF00";
                    correctAnswerS1 += 1;
                } else if (dogruYanlisDurumu[i] === "incorrect") {
                    color = "red";
                } else {
                    color = "red";
                }  // Burada birinci bölümün sonuçtakı karelerinin rengini degiştirebilirsin


                // Kareyi tıklanabilir ve ilgili soruya gitmek için data-index ekle
                sonucHTMLS1 += '<div class="soruKare" style="background-color: ' + color + '" data-index="' + i + '" onclick="goToQuestion(event)">';
                sonucHTMLS1 += i + 1; // Soru numarasını karenin içine ekle
                sonucHTMLS1 += "</div>";
            }

            document.getElementById('resultS1').innerHTML = sonucHTMLS1;
            sonucHTML += "</div>";


            // Proceed düğmesini sonuç alanının sonuna ekle ve ortala
            sonucHTML +=
                '<div class="center-button"><button id="proceedButtonBottom" onclick="showKnowledgeExplanation()">PROCEED</button></div>';

            document.getElementById("sonucAlani").innerHTML = sonucHTML;
            document.getElementById("sonucAlani").style.display = "block";
            document.getElementById("quizAlani").style.display = "none"; // Quiz alanını gizle
            document.getElementById("proceedButtonBottom").style.display = "block";

            // const lockQuizButton = document.getElementById("lock-quiz-button");
            // lockQuizButton.classList.remove("hidden");
        }

        // Kareleri tıklanabilir ve ilgili soruya gitmek için işlev
        function goToQuestion(event) {
            stopTimer();
            timerPausedByGoToQuestion = true; // Bayrağı ayarlayın
            var questionIndex = parseInt(event.target.getAttribute("data-index"));
            soruIndex = questionIndex; // İlgili soru indeksini güncelle
            document.getElementById("sonucAlani").style.display = "none"; // Sonuç alanını gizle
            document.getElementById("quizAlani").style.display = "block"; // Quiz alanını göster
            showNextQuestion(false); // ilgili soruyu gösterirken timer başlamasın

            if (viewResult) {
                document.getElementById('finalResultContainerId').classList.add('hidden');
            }

        }

        // Bilgi açıklama bölümünü gösteren işlev
        function showKnowledgeExplanation() {
            document.getElementById("proceedButtonBottom").style.display = "none"; // İlk düğmeyi gizle

            // Bilgi açıklama içeriklerini ekle
            var explanationHTML = '<h4 class="knowledge-explanation">KNOWLEDGE EXPLANATION</h4>';
            explanationHTML += '<p class="knowledge-explanation">In this section, you will encounter four types of questions.</p>';
            explanationHTML += '<p class="knowledge-explanation"><strong>Multiple Choice (Radio Button):</strong> You will need to select one answer from either two or three options.</p>';
            explanationHTML += '<p class="knowledge-explanation"><strong>Image Selection:</strong> You will choose your answer by clicking on one or more images, as there may be multiple correct answers.</p>';
            explanationHTML += '<p class="knowledge-explanation"><strong>Fill in the Blank:</strong> You are required to enter a number to complete the answer.</p>';
            explanationHTML += '<p class="knowledge-explanation"><strong>Checkbox:</strong> You will have more than three options to choose from, and there may be several correct answers you can select simultaneously.</p>';
            explanationHTML += '<p class="knowledge-explanation">This explanation is intended to help you understand the question formats before you begin the quiz.</p>';

            // "dogruYanlisBlok"u göster (zaten quizBitir fonksiyonunda ekledik)
            explanationHTML += document.getElementById("dogruYanlisBlok").outerHTML;

            // Yeni proceed butonu
            explanationHTML +=
                '<div class="center-button" style="margin-bottom: 300px;"><button id="proceedKnowledgeButton" onclick="showStartKnowledge()">PROCEED</button></div>';

            document.getElementById("sonucAlani").innerHTML = explanationHTML;
            document.getElementById("proceedKnowledgeButton").style.display = "block"; // Yeni düğmeyi göster
        }

        // Knowledge başlangıç bölümünü gösteren işlev
        function showStartKnowledge() {
            document.getElementById("proceedKnowledgeButton").style.display = "none"; // İkinci düğmeyi gizle

            // Bilgi başlangıç içeriklerini ekle
            var startKnowledgeHTML = '<h4 class="knowledge-explanation">START KNOWLEDGE</h4>';
            startKnowledgeHTML += '<p class="knowledge-explanation">You will now begin the knowledge section.</p>';
            startKnowledgeHTML += '<p class="knowledge-explanation">In this section, you will see 12 questions, of which you must answer at least 10 correctly.</p>';
            startKnowledgeHTML += '<p class="knowledge-explanation">You have 7 minutes to answer all 12 questions. If you are doing an extended or individual theory exam, you have 12 minutes.</p>';
            startKnowledgeHTML += '<h4 class="knowledge-explanation">Good luck!</h4>';
            // Yeni proceed butonu
            startKnowledgeHTML +=
                '<div class="center-button"><button id="proceedToFirstQuestionButton" onclick="startFirstQuestion()">PROCEED TO THE FIRST QUESTION</button></div>';

            document.getElementById("sonucAlani").innerHTML = startKnowledgeHTML;
            document.getElementById("proceedToFirstQuestionButton").style.display = "block"; // Yeni düğmeyi göster
        }

        // İlk soruya başlamayı sağlayan işlev
        function startFirstQuestion() {
            console.log("startFirstQuestion() çalıştırıldı.");

            // Proceed düğmesini gizle
            const proceedButton = document.getElementById("proceedToFirstQuestionButton");
            if (proceedButton) {
                proceedButton.style.display = "none";
                console.log("Proceed to First Question düğmesi gizlendi.");
            }

            // Sonuç alanını gizle
            const sonucAlani = document.getElementById('sonucAlani');
            if (sonucAlani) {
                sonucAlani.style.display = "none";
                console.log("Sonuç alanı gizlendi.");
            }

            // Diğer elemanları gizle
            const lockQuizButton = document.getElementById('lock-quiz-button');
            if (lockQuizButton) {
                lockQuizButton.classList.add('hidden');
                console.log("Lock quiz butonu gizlendi.");
            }

            const buttonContainer = document.getElementById('buttonContainer');
            if (buttonContainer) {
                buttonContainer.classList.add('hidden');
                console.log("Button container gizlendi.");
            }

            // Quiz bölümü 2'ye başlamak için gerekli işlemler
            console.log("İkinci bölüm başlıyor...");

            startQuizS2();
        }
        function startQuizS2() {
            // Quiz başlatma işlemleri
            console.log("Quiz started");
        }

        //script for section 2


        const FULL_DASH_ARRAY = 107;
        const WARNING_THRESHOLD = 211;
        const ALERT_THRESHOLD = 106;

        const COLOR_CODES = {
            info: {
                color: "green",
            },
            warning: {
                color: "orange",
                threshold: WARNING_THRESHOLD,
            },
            alert: {
                color: "red",
                threshold: ALERT_THRESHOLD,
            },
        };

        const TIME_LIMIT = 420; /* İkinci bölüm zaman limiti*/
        let timePassed = 0;
        let timeLeft = TIME_LIMIT;
        let timerIntervalS2 = null;
        let remainingPathColor = COLOR_CODES.info.color;
        let quizAnswers = [];
        let allQuestions = [];

        document.getElementById("base-timer-label-s2").innerHTML =
            formatTimeS2(timeLeft);


        function onTimesUp() {
            const questions = document.querySelectorAll(".question");
            questions.forEach((question, index) => {
                question.classList.toggle("hidden", true);
            });
            document.getElementById("previous-button").classList.toggle('hidden', true);
            document.getElementById("next-button").classList.add('hidden');
            clearInterval(timerIntervalS2);
            yesButtonClicked('section2', true);
        }

        function startTimerS2() {
            timerIntervalS2 = setInterval(() => {
                timePassed = timePassed += 1;
                timeLeft = TIME_LIMIT - timePassed;
                document.getElementById("base-timer-label-s2").innerHTML =
                    formatTimeS2(timeLeft);
                setCircleDasharrayS2();
                setRemainingPathColorS2(timeLeft);

                if (timeLeft === 0) {
                    onTimesUp();
                }
            }, 1000);
        }

        function formatTimeS2(time) {
            const minutes = Math.floor(time / 60);
            let seconds = time % 60;

            if (seconds < 10) {
                seconds = `0${seconds}`;
            }

            return `${minutes}:${seconds}`;
        }

        function setRemainingPathColorS2(timeLeft) {
            const { alert, warning, info } = COLOR_CODES;
            if (timeLeft <= alert.threshold) {
                document
                    .getElementById("base-timer-path-remaining-s2")
                    .classList.remove(warning.color);
                document
                    .getElementById("base-timer-path-remaining-s2")
                    .classList.add(alert.color);
            } else if (timeLeft <= warning.threshold) {
                document
                    .getElementById("base-timer-path-remaining-s2")
                    .classList.remove(info.color);
                document
                    .getElementById("base-timer-path-remaining-s2")
                    .classList.add(warning.color);
            }
        }

        function calculateTimeFractionS2() {
            const rawTimeFraction = timeLeft / TIME_LIMIT;
            return rawTimeFraction - (1 / TIME_LIMIT) * (1 - rawTimeFraction);
        }

        function setCircleDasharrayS2() {
            const circleDasharray = `${(
                calculateTimeFractionS2() * FULL_DASH_ARRAY
            ).toFixed(0)} 107`;
            document
                .getElementById("base-timer-path-remaining-s2")
                .setAttribute("stroke-dasharray", circleDasharray);
        }

        let currentQuestionIndex = 0;

        // Previous düğmesini göster veya gizle
        function updatePreviousButton() {
            const previousButton = document.getElementById("previous-button");
            previousButton.classList.toggle("hidden", currentQuestionIndex === 0);
        }

        function utf8_to_b64(str) {
            return btoa(unescape(encodeURIComponent(str)));
        }

        function b64_to_utf8(str) {
            return decodeURIComponent(escape(atob(str)));
        }

        // Next düğmesini göster veya gizle
        function updateNextButton() {
            const nextButton = document.getElementById("next-button");
            nextButton.classList.remove("hidden");
        }

        // Şu anki soruyu göster
        function showCurrentQuestion() {
            document.getElementById('proceedSection3').classList.add('hidden');
            const questions = document.querySelectorAll(".question");
            questions.forEach((question, index) => {
                question.classList.toggle("hidden", index !== currentQuestionIndex);
            });
        }

        // Previous düğmesine tıklama işlevi
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showCurrentQuestion();
                updatePreviousButton();
                updateNextButton();
            }
        }

        // Next düğmesine tıklama işlevi
        function nextQuestionS2() {
            const totalQuestions = document.querySelectorAll(".question").length;
            if (currentQuestionIndex < totalQuestions - 1) {
                currentQuestionIndex++;
                showCurrentQuestion();
                updatePreviousButton();
                updateNextButton();


                // let aUdiv =  document.getElementById('answerUnanswerDivS2')
                // if (aUdiv) {aUdiv.classList.add('hidden')};

                // let pTS3Btn = document.getElementById('proceedToSecction3Button')
                // if (pTS3Btn) {pTS3Btn.classList.add('hidden')};

                // let eM = document.getElementById('endMessage');
                // if (eM) { eM.classList.add('hidden'); };

            } else {

                // Son soru ise
                const quizContainer = document.querySelector(".quiz-container");
                const endMessage = document.getElementById("endMessage");
                // endMessage.id = "endMessage"; // endMessage öğesine bir id atayın
                // endMessage.style.display = "flex";
                // endMessage.style.flexWrap = "wrap";


                // const answerUnanswerDiv = document.createElement('div');
                // answerUnanswerDiv.id = 'answerUnanswerDivS2';

                //for testing
                const endMessage2 = document.createElement("div");
                endMessage2.id = "endMessage2"; // endMessage2 öğesine bir id atayın
                endMessage2.style.display = "flex";
                endMessage2.style.flexWrap = "wrap";

                for (let i = 0; i < totalQuestions; i++) {
                    const questionNumber = i + 1;
                    const questionBlock = document.createElement("div");
                    questionBlock.classList.add("question-block");
                    questionBlock.id = ``;
                    questionBlock.style.width = "30px";
                    questionBlock.style.height = "30px";
                    questionBlock.style.border = "1px solid black";
                    questionBlock.style.textAlign = "center";
                    questionBlock.style.lineHeight = "30px";
                    questionBlock.style.margin = "5px";
                    questionBlock.textContent = questionNumber;
                    if (endMessage.childElementCount != totalQuestions) {
                        endMessage.appendChild(questionBlock);
                    }
                }

                for (let i = 0; i < totalQuestions; i++) {
                    const questionNumber = i + 1;
                    const questionBlock = document.createElement("div");
                    questionBlock.classList.add("question-block");
                    questionBlock.style.width = "30px";
                    questionBlock.style.height = "30px";
                    questionBlock.style.border = "1px solid black";
                    questionBlock.style.textAlign = "center";
                    questionBlock.style.lineHeight = "30px";
                    questionBlock.style.margin = "5px";
                    questionBlock.textContent = questionNumber;
                    endMessage2.appendChild(questionBlock);
                }

                // endMessage içindeki question-block'lara tıklanınca işlev
                endMessage
                    .querySelectorAll(".question-block")
                    .forEach((block, index) => {
                        block.addEventListener("click", () => {
                            currentQuestionIndex = index;
                            showCurrentQuestion();
                            updatePreviousButton();
                            updateNextButton();
                            // document
                            //   .querySelectorAll(".question-block")
                            //   .forEach((block) => {
                            //     block.classList.add("hidden");
                            //   });

                            // Tüm soru bloklarını gizle
                            const questions = document.querySelectorAll(".question");
                            questions.forEach((question) => {
                                question.classList.add("hidden");
                            });

                            // Seçilen sorunun bloğunu göster
                            const selectedQuestion = document.getElementById(
                                `question-${currentQuestionIndex + 1}`
                            );
                            selectedQuestion.classList.remove("hidden");


                            // Quiz container'ını göster
                            quizContainer.classList.remove("hidden");

                            // endMessage öğesini gizle
                            // endMessage.classList.add("hidden");
                            // answerUnanswerDivS2.classList.add('hidden');
                            endMessage2.classList.add("hidden");
                        });
                    });

                //for testing  
                endMessage2
                    .querySelectorAll(".question-block")
                    .forEach((block, index) => {
                        block.addEventListener("click", () => {
                            currentQuestionIndex = index;
                            showCurrentQuestion();
                            updatePreviousButton();
                            updateNextButton();

                            document.getElementById('finalResultContainerId').classList.add('hidden');

                            document
                                .querySelectorAll(".question-block")
                                .forEach((block) => {
                                    block.classList.add("hidden");
                                });

                            // Tüm soru bloklarını gizle
                            const questions = document.querySelectorAll(".question");
                            questions.forEach((question) => {
                                question.classList.add("hidden");
                            });

                            // Seçilen sorunun bloğunu göster
                            const selectedQuestion = document.getElementById(
                                `question-${currentQuestionIndex + 1}`
                            );
                            selectedQuestion.classList.remove("hidden");

                            // Quiz container'ını göster
                            quizContainer.classList.remove("hidden");

                            // endMessage öğesini gizle
                            // endMessage.classList.add("hidden");
                            endMessage2.classList.add("hidden");
                        });
                    });

                // Önceki ve Sonraki düğmeleri gizle
                document.getElementById("previous-button").classList.add("hidden");
                document.getElementById("next-button").classList.add("hidden");

                // Quiz Container'ı gizle
                quizContainer.classList.add("hidden");

                // Yeni bloğu ekleyip göster
                // const body = document.querySelector("body");

                // const answeredQuestions = document.createElement('p');
                // answeredQuestions.textContent = `Number of Answered Questions: ${correctAnswerS2.answer}`;

                // const unAnsweredQuestions = document.createElement('p');
                // unAnsweredQuestions.textContent = `Number of Unanswered Questions: ${correctAnswerS2.unanswer}`;

                // answerUnanswerDiv.appendChild(answeredQuestions);
                // answerUnanswerDiv.appendChild(unAnsweredQuestions);

                // body.appendChild(answerUnanswerDiv);
                // body.appendChild(endMessage);



                //for testing
                const resultSection2 = document.getElementById('resultS2');
                resultSection2.appendChild(endMessage2);

                // const lockQuizButton = document.getElementById("lock-quiz-button-s-2");
                // lockQuizButton.classList.remove("hidden");

                if (viewResult) {
                    document.getElementById("finalResultContainerId").classList.remove("hidden");
                } else {
                    const proceedSection3 = document.getElementById("proceedSection3");
                    proceedSection3.classList.remove("hidden");
                }

                // Son sorudaki "Next" düğmesine tıklandığında cevapları kontrol eden ve questionBlock rengini güncelleyen fonksiyon
                checkAnswersAndUpdateBlocksS2();
            }
        }

        // Quiz'e başlama işlevi
        function startQuizS2() {

            loadQuiz(); // Quiz'i yükle


            let countdownElement = document.getElementById("countdown");
            countdownElement.classList.remove("hidden"); // Zamanlayıcıyı göster
            startTimerS2(); // Geri sayımı başlat

            // Başla düğmesini gizle
            // let startButton = document.getElementById("start-button");
            // startButton.classList.add("hidden");
        }

        // Belirli sayıda rastgele soru çekmek için işlev
        async function fetchQuestions(url, count) {
            try {
                const response = await fetch(url);
                const data = await response.json();
                const selectedQuestions = data.sorular
                    .sort(() => Math.random() - 0.5)
                    .slice(0, count);
                return selectedQuestions;
            } catch (error) {
                console.error("Soruları alırken bir hata oluştu:", error);
                return [];
            }
        }

        async function loadQuiz() {
            const t1Questions = await fetchQuestions(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_f6abb1bab02a4e1bb6023f7df744ce69.json",
                8
            );
            const t2Questions = await fetchQuestions(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_88fd7d77c0e84d23b619dd787636d38c.json",
                2
            );
            const t3Questions = await fetchQuestions(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_de4444aac5b644f9953acf431ffc71eb.json",
                1
            );
            const t4Questions = await fetchQuestions(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_d7d20177629d4b8087e341108f18ad3d.json",
                1
            );

            t1Questions.forEach((question) => {
                question.type = "radio";
                question.cevaplar = shuffle(question.cevaplar);
                question.correctAnswer = question.dogruCevap;
            });
            t3Questions.forEach((question) => {
                question.type = "checkbox";
                question.cevaplar = shuffle(question.cevaplar);
                question.correctAnswers = question.dogruCevap;
            });
            t2Questions.forEach((question) => (question.onlyNumbers = true));
            t4Questions.forEach((question) => {
                question.type = "image";
                question.secenekler = shuffle(question.secenekler);
                question.correctAnswers = question.dogruCevap;
            });

            allQuestions = [
                ...t1Questions,
                ...t2Questions,
                ...t3Questions,
                ...t4Questions,
            ].sort(() => Math.random() - 0.5);

            // Soruların doğru cevaplarını ve cevaplarını belirleyin
            quizAnswers = allQuestions.map((question, index) => ({
                id: index + 1,
                dogruCevap: question.dogruCevap,
                userAnswer: null,
            }));

            const quizContainer = document.querySelector(".quiz-container");
            quizContainer.innerHTML = createHTMLForQuestions(allQuestions);
            showCurrentQuestion();
            updatePreviousButton();
            updateNextButton();
        }

        /*////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////*/
        function createHTMLForQuestions(questions) {
            let html = "";
            questions.forEach((question, index) => {
                const questionId = `question-${index + 1}`;
                html += `<div class="question hidden" id="${questionId}">
        <p>${index + 1}. ${question.soru}</p>`;
                if (question.resim) {
                    html += `<img src="${question.resim}" alt="Resim" class="question-image"><br>`;
                } else if (question.type === "image") {
                    const imageContainerClass = question.secenekler.length === 4 ? 'image-container grid-4' : 'image-container';
                    html += `<div class="${imageContainerClass}">`;
                    question.secenekler.forEach((resim, resimIndex) => {
                        html += `<div class="image-wrapper">
                <img src="${resim}" alt="Resim ${resimIndex + 1}" class="question-image question-image-t4 selectable" onclick="toggleSelection(this, ${index + 1}, ${resimIndex})">
             </div>`;
                    });
                    html += `</div><br>`;
                } else if (question.resimler) {
                    question.resimler.forEach((resim, resimIndex) => {
                        html += `<img src="${resim}" alt="Resim ${resimIndex + 1}" class="selectable" onclick="toggleSelection(this)"><br>`;
                    });
                }
                html += '<div class="answers">';
                if (question.type === "radio") {
                    question.cevaplar.forEach((cevap, cevapIndex) => {
                        html += `<label class="cevapSecenegiS2" onclick="highlightSelectedS2(this, ${index + 1})">
              <input type="radio" name="answer${index + 1}" value="${cevap}"> ${cevap}<br></label>`;
                    });
                } else if (question.type === "checkbox") {
                    question.cevaplar.forEach((cevap, cevapIndex) => {
                        html += `<label class="cevapSecenegiS2" onclick="highlightSelectedCheckbox(this, ${index + 1})">
              <input type="checkbox" name="answer${index + 1}[]" value="${cevap}"> ${cevap}<br></label>`;
                    });
                } else if (question.onlyNumbers) {
                    html += `<input type="number" name="answer${index + 1}" class="answer-input" placeholder="Answer here" oninput="handleTextInput(${index + 1}, this)" inputmode="numeric"><br>`;
                }

                // Feedback için alan ekleme
                html += `</div>
    <div class="feedback" id="feedback-${index + 1}" style="display: none;">
        ${question.feedback ? question.feedback : ""}
    </div>
    </div>`;
            });

            // Resim içermeyen sorulara 'no-image' sınıfını ekle
            setTimeout(() => {
                document.querySelectorAll('.question').forEach(question => {
                    if (!question.querySelector('.question-image')) {
                        question.classList.add('no-image');
                    }
                });
            }, 0);

            return html;
        }





        // Feedback mesajını göstermek için fonksiyon
        function showFeedback(questionIndex) {
            const feedbackDiv = document.getElementById(
                `feedback-${questionIndex}`
            );
            if (feedbackDiv) {
                feedbackDiv.style.display = "block";
            }
        }

        // Örnek kullanım: İlk sorunun feedback'ini göster
        // showFeedback(1);

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function toggleSelection(image, questionIndex, resimIndex) {
            const selectedAnswer = quizAnswers.find((q) => q.id === questionIndex);
            if (!selectedAnswer.userAnswer) {
                selectedAnswer.userAnswer = [];
            }

            const resimURL = image.getAttribute("src");

            if (selectedAnswer.userAnswer.includes(resimURL)) {
                image.parentNode.classList.remove("selected");
                selectedAnswer.userAnswer.splice(
                    selectedAnswer.userAnswer.indexOf(resimURL),
                    1
                );
            } else {
                image.parentNode.classList.add("selected");
                selectedAnswer.userAnswer.push(resimURL);
            }

            evaluateAnswers("endMessage"); // Cevapları güncelle
            evaluateAnswers("endMessage2"); // Cevapları güncelle
        }


        //MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
        document.body.addEventListener("input", function (event) {
            if (event.target.classList.contains("answer-input")) {
                let value = event.target.value.replace(/\D/g, "");
                event.target.value = value;
            }
        });
        //MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
        function handleTextInput(questionIndex, input) {
            const question = quizAnswers.find((q) => q.id === questionIndex);
            if (question) {
                question.userAnswer = [input.value]; // Single answer wrapped in an array for uniformity
            }
        }

        function highlightSelectedS2(radio, questionIndex) {
            var questionBlock = radio.closest(".question");
            var labels = questionBlock.querySelectorAll(".cevapSecenegiS2");
            labels.forEach((label) => label.classList.remove("selectedAnswer"));
            radio.closest(".cevapSecenegiS2").classList.add("selectedAnswer");
            handleAnswerInput(questionIndex, radio.querySelector("input").value);
        }

        function highlightSelectedCheckbox(label, questionIndex) {
            const checkbox = label.querySelector('input[type="checkbox"]');
            const selectedAnswer = quizAnswers.find((q) => q.id === questionIndex);

            if (!selectedAnswer.userAnswer) {
                selectedAnswer.userAnswer = [];
            }

            if (checkbox.checked) {
                if (!selectedAnswer.userAnswer.includes(checkbox.value)) {
                    selectedAnswer.userAnswer.push(checkbox.value);
                }
                label.classList.add("selectedAnswer");
            } else {
                const answerIndex = selectedAnswer.userAnswer.indexOf(checkbox.value);
                if (answerIndex > -1) {
                    selectedAnswer.userAnswer.splice(answerIndex, 1);
                }
                label.classList.remove("selectedAnswer");
            }

            evaluateAnswers("endMessage");
            evaluateAnswers("endMessage2");
        }

        function handleAnswerInput(questionIndex, answer) {
            const question = quizAnswers.find((q) => q.id === questionIndex);
            if (question) {
                question.userAnswer = [answer]; // Single answer wrapped in an array for uniformity
            }
        }
        //YENİ EKLENEN VE GÜNCELLENEN KODLAR BAŞLANĞIC
        function evaluateAnswers(containerId) {
            if (containerId == 'endMessage') {
                correctAnswerS2 = { questions: [], correct: 0, unanswer: 0, answer: 0 }
            };

            const questionBlocks = document.querySelectorAll(
                `#${containerId} .question-block`
            );

            for (let index = 0; index < questionBlocks.length; index++) {
                let block = questionBlocks[index];


                // questionBlocks.forEach((block) => {
                const questionIndex = parseInt(block.textContent);
                const question = quizAnswers.find((q) => q.id === questionIndex);

                let findCheck = correctAnswerS2.questions.find(x => x.id === questionIndex);

                // Default olarak şeffaf yap
                block.style.backgroundColor = "transparent";
                if (question.userAnswer && question.userAnswer.length > 0) {

                    if (containerId == 'endMessage') { correctAnswerS2.answer = correctAnswerS2.answer + 1; }
                    let isCorrect = false;

                    if (Array.isArray(question.dogruCevap)) {
                        const sortedCorrectAnswers = [...question.dogruCevap].sort();
                        const sortedUserAnswers = [...question.userAnswer].sort();

                        if (question.dogruCevap.length === 1) {
                            isCorrect =
                                sortedUserAnswers.length === 1 &&
                                sortedUserAnswers[0] === sortedCorrectAnswers[0];
                        } else {
                            isCorrect =
                                sortedCorrectAnswers.length === sortedUserAnswers.length &&
                                sortedCorrectAnswers.every(
                                    (answer, index) => answer === sortedUserAnswers[index]
                                );
                        }
                    } else {
                        isCorrect =
                            question.userAnswer.length === 1 &&
                            question.userAnswer[0] === question.dogruCevap;
                    }

                    // endMessage içindeki tüm bloklar lightgray olacak
                    if (containerId === "endMessage") {
                        block.style.backgroundColor = "lightgray";
                        if (findCheck) {
                            findCheck.isCorrect = false;
                        }
                    } else {
                        block.style.backgroundColor = isCorrect ? "#00FF00" : "red";

                        if (isCorrect) {
                            if (findCheck) {
                                findCheck.isCorrect = isCorrect;
                            } else {
                                correctAnswerS2.questions.push({ id: questionIndex, isCorrect: isCorrect });
                            }
                        } else {
                            if (findCheck) {
                                findCheck.isCorrect = false;
                            }
                        }

                        // `endMessage2` içindeki bloklara tıklama olayı ekle
                        if (containerId === "endMessage2") {
                            block.addEventListener("click", () => {
                                showQuestion(questionIndex - 1); // İlgili soruya git
                            });
                        }
                    }
                } else {
                    if (containerId == 'endMessage') { correctAnswerS2.unanswer = correctAnswerS2.unanswer + 1; }
                    if (findCheck) {
                        findCheck.isCorrect = false;
                    }
                }

                // endMessage içindeki questionBlock'lara tıklanınca "Quiz'i Kitle ve İşaretleri Ekle" düğmesini gizle
                if (containerId === "endMessage") {
                    block.addEventListener("click", () => {
                        console.log('testing');
                        // document
                        //   .getElementById("lock-quiz-button-s-2")
                        //   .classList.add("hidden");
                    });
                }

                // });

            }

            const answeredQuestions = document.getElementById('answeredQuestionsS2End');
            answeredQuestions.textContent = `Number of Answered Questions: ${correctAnswerS2.answer}`;

            const unAnsweredQuestions = document.getElementById('unAnsweredQuestionsS2End');
            unAnsweredQuestions.textContent = `Number of Unanswered Questions: ${correctAnswerS2.unanswer}`;

        }

        function showQuestion(index) {
            const questions = document.querySelectorAll(".question");
            questions.forEach((question, i) => {
                if (i === index) {
                    question.classList.remove("hidden");
                } else {
                    question.classList.add("hidden");
                }
            });
            currentQuestionIndex = index;
            updatePreviousButton();
            updateNextButton();
        }

        function disableAllQuestionOptions() {
            const questions = document.querySelectorAll(".question");
            questions.forEach((question, index) => {
                const inputs = question.querySelectorAll("input");
                inputs.forEach((input) => {
                    input.disabled = true;
                });

                const labels = question.querySelectorAll(".cevapSecenegiS2");
                labels.forEach((label) => {
                    label.style.pointerEvents = "none";
                });

                // T4 tipi sorular için (resim içeren sorular)
                const images = question.querySelectorAll(".question-image");
                images.forEach((image) => {
                    image.style.pointerEvents = "none"; // Tıklanamaz hale getir
                    image.classList.remove("selectable"); // Seçilebilir sınıfını kaldır
                });
            });
        }

        function checkAnswersAndUpdateBlocksS2() {
            // Evaluate answers for endMessage and endMessage2
            evaluateAnswers("endMessage");
            evaluateAnswers("endMessage2");
        }

        document
            .getElementById("next-button")
            .addEventListener("click", function () {
                const totalQuestions = document.querySelectorAll(".question").length;
                if (currentQuestionIndex === totalQuestions - 1) {
                    checkAnswersAndUpdateBlocksS2();
                }
            });

        //--------------------------------------------------------------//

        // Sadece bir kez işaret ekleme kontrolü için bir değişken
        // Sadece bir kez işaret ekleme kontrolü için bir değişken
        // Bağımsız düğmeye tıklanınca lockQuizQuestions fonksiyonunu çağır
        // document
        //   .getElementById("lock-quiz-button-s-2")
        //   .addEventListener("click", function () {
        //     lockQuizQuestionsS2();
        //   });

        function lockQuizQuestionsS2() {
            console.log("lockQuizQuestionsS2 fonksiyonu çalıştırıldı.");
            const questions = document.querySelectorAll(".question");
            questions.forEach((question, index) => {
                question.classList.add("hidden");

                const inputs = question.querySelectorAll("input, .question-image-t4");
                inputs.forEach((input) => {
                    const label = input.closest(".cevapSecenegiS2");

                    if (!label && input.classList.contains("question-image-t4")) {
                        input.classList.add("disabled2");

                        const markerSpan = document.createElement("span");
                        markerSpan.classList.add("marker");
                        markerSpan.style.position = "absolute";
                        markerSpan.style.top = "5px";
                        markerSpan.style.right = "5px";
                        markerSpan.style.fontSize = "15px";
                        markerSpan.style.backgroundColor = "white";
                        markerSpan.style.borderRadius = "50%";
                        markerSpan.style.padding = "2px";

                        const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                        const questionData = quizAnswers[questionIndex];
                        if (questionData.dogruCevap.includes(input.src)) {
                            markerSpan.textContent = "✔️";
                        } else {
                            markerSpan.textContent = "❌";
                        }

                        const parentContainer = input.parentElement;
                        parentContainer.style.position = "relative";
                        parentContainer.appendChild(markerSpan);
                        markerSpan.style.top = `${input.offsetTop + 5}px`;
                        markerSpan.style.right = `${input.offsetRight + 5}px`;
                        return;
                    }

                    if (input.type === "text") {
                        input.disabled = true;
                        const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                        const questionData = quizAnswers[questionIndex];
                        if (!input.value.trim()) {
                            input.style.backgroundColor = "lightgray";
                            return;
                        }
                        if (!input.parentNode.querySelector(".marker")) {
                            const markerSpan = document.createElement("span");
                            markerSpan.classList.add("marker");
                            markerSpan.style.marginRight = "10px";
                            markerSpan.style.display = "inline-block";
                            markerSpan.style.width = "20px";

                            if (questionData.dogruCevap.includes(input.value)) {
                                markerSpan.textContent = "✔️";
                                input.style.backgroundColor = "rgb(11, 207, 11)";
                            } else {
                                markerSpan.textContent = "❌";
                                input.style.backgroundColor = "red";
                            }

                            input.parentNode.insertBefore(markerSpan, input);
                        }
                        return;
                    }

                    if (label && input.type !== "text") {
                        input.disabled = true;
                        label.style.pointerEvents = "none";

                        if (!label.querySelector(".marker")) {
                            const markerSpan = document.createElement("span");
                            markerSpan.classList.add("marker");
                            markerSpan.style.marginRight = "0px";
                            markerSpan.style.display = "inline-block";
                            markerSpan.style.width = "20px";

                            const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                            const questionData = quizAnswers[questionIndex];
                            if (questionData.dogruCevap.includes(input.value)) {
                                markerSpan.textContent = "✔️";
                                if (input.checked) {
                                    label.classList.add("selected-correct");
                                    label.style.backgroundColor = "rgb(11, 207, 11)";
                                } else {
                                    label.style.backgroundColor = "lightgrey";
                                }
                            } else {
                                markerSpan.textContent = "❌";
                                if (input.checked) {
                                    label.classList.add("selected-wrong");
                                    label.style.backgroundColor = "red";
                                } else {
                                    label.style.backgroundColor = "lightgrey";
                                }
                            }

                            label.insertBefore(markerSpan, label.firstChild);
                        }
                    }
                });

                // Number inputları devre dışı bırakma
                const numberInputs = question.querySelectorAll('input[type="number"]');
                numberInputs.forEach(input => {
                    input.disabled = true;
                });

                const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                const questionData = quizAnswers[questionIndex];
                const feedback = allQuestions[questionIndex].feedback;

                if (feedback) {
                    const feedbackDiv = document.createElement("div");
                    feedbackDiv.className = "feedback-container";
                    feedbackDiv.style.border = "1px solid #848586";
                    feedbackDiv.style.padding = "10px";
                    feedbackDiv.style.marginTop = "10px";
                    feedbackDiv.style.display = "flex";
                    feedbackDiv.style.justifyContent = "center"; // Yatayda ortala
                    feedbackDiv.style.alignItems = "center"; // Dikeyde ortala
                    feedbackDiv.style.width = "95%"; // Genişliği tam olarak ayarla
                    feedbackDiv.style.maxWidth = "100%";
                    feedbackDiv.style.borderRadius = "10px";
                    feedbackDiv.style.boxShadow = "0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)";
                    feedbackDiv.style.margin = "10px auto"; // Yatayda ortala
                    feedbackDiv.style.boxSizing = "border-box";

                    const feedbackText = feedback.metin;

                    const feedbackTextBox = document.createElement("div");
                    feedbackTextBox.className = "feedback-text";
                    feedbackTextBox.textContent = feedbackText;
                    feedbackTextBox.style.margin = "0";
                    feedbackTextBox.style.flex = "1";
                    feedbackTextBox.style.overflow = "auto";
                    feedbackTextBox.style.whiteSpace = "pre-wrap";
                    feedbackDiv.appendChild(feedbackTextBox);

                    const feedbackImage = document.createElement("img");
                    feedbackImage.style.width = "30px";
                    feedbackImage.style.height = "30px";
                    feedbackImage.style.marginLeft = "5px";
                    feedbackImage.style.border = "0px solid";

                    let feedbackImageUrl;
                    if (
                        !questionData.userAnswer ||
                        (Array.isArray(questionData.userAnswer) &&
                            questionData.userAnswer.length === 0)
                    ) {
                        feedbackImageUrl = feedback.cevaplanmamisResim;
                    } else if (
                        Array.isArray(questionData.dogruCevap) &&
                        Array.isArray(questionData.userAnswer)
                    ) {
                        const sortedCorrectAnswers = [...questionData.dogruCevap].sort();
                        const sortedUserAnswers = [...questionData.userAnswer].sort();
                        const isCorrect =
                            sortedCorrectAnswers.length === sortedUserAnswers.length &&
                            sortedCorrectAnswers.every(
                                (answer, index) => answer === sortedUserAnswers[index]
                            );

                        feedbackImageUrl = isCorrect
                            ? feedback.dogruCevapResim
                            : feedback.yanlisCevapResim;
                    } else if (questionData.userAnswer[0] === questionData.dogruCevap) {
                        feedbackImageUrl = feedback.dogruCevapResim;
                    } else {
                        feedbackImageUrl = feedback.yanlisCevapResim;
                    }

                    feedbackImage.src = feedbackImageUrl;
                    feedbackDiv.appendChild(feedbackImage);

                    const answersElement = question.querySelector('.answers');
                    if (answersElement) {
                        answersElement.style.display = "flex"; // .answers öğesini flex yap
                        answersElement.style.flexDirection = "column"; // İçeriği dikeyde hizala
                        answersElement.style.alignItems = "center"; // İçeriği yatayda ortala
                        answersElement.appendChild(feedbackDiv);
                    } else if (window.innerWidth >= 768) {
                        const questionParagraph = question.querySelector('p');
                        if (questionParagraph) {
                            feedbackDiv.style.position = 'absolute';
                            feedbackDiv.style.top = `${questionParagraph.offsetHeight + 51}px`;
                            feedbackDiv.style.left = '0';
                            question.style.position = 'relative';
                            question.appendChild(feedbackDiv);
                        }
                    } else {
                        question.appendChild(feedbackDiv);
                    }
                }
            });

            const timerDiv = document.getElementById("timerDiv");
            if (timerDiv) {
                timerDiv.style.display = "none";
            }

            const soruAlanlari = document.querySelectorAll(".question");
            soruAlanlari.forEach((soruAlani) => {
                if (window.innerWidth >= 768) {
                    soruAlani.style.top = "0px";
                } else {
                    soruAlani.style.top = "0px";
                }
            });
        }

        lockQuizQuestionsS2();

        window.addEventListener('resize', () => {
            const questions = document.querySelectorAll(".question");
            questions.forEach((question, index) => {
                const feedbackDiv = document.getElementById(`feedback-${index + 1}`);
                if (feedbackDiv) {
                    const answersElement = question.querySelector('.answers');
                    if (!answersElement && window.innerWidth >= 768) {
                        const questionParagraph = question.querySelector('p');
                        if (questionParagraph) {
                            feedbackDiv.style.position = 'absolute';
                            feedbackDiv.style.top = `${questionParagraph.offsetHeight + 51}px`;
                            feedbackDiv.style.left = '0';
                            feedbackDiv.style.marginTop = '0';
                            question.style.position = 'relative';
                        } else {
                            feedbackDiv.style.position = 'static';
                            feedbackDiv.style.marginTop = '40px';
                        }
                    } else {
                        feedbackDiv.style.position = 'static';
                        feedbackDiv.style.marginTop = window.innerWidth >= 768 ? "40px" : "6px";
                    }
                }
            });
            console.log(`Feedback positions updated`);
        });




        // Quiz başlatma ve tam ekran yapma fonksiyonunu birleştiriyoruz
        function startQuizAndFullscreen() {
            // Mevcut startSection3Questions fonksiyonunu çağır
            startSection3Questions();

            // Sayfayı tam ekran yap
            openFullscreen();
        }









        function startSection3Questions() {
            // 3. bölüm başlatılıyor (quiz başlasın)
            console.log("3. bölüm başladı!");  // Bu kısmı kendi quiz başlatma fonksiyonlarınızla değiştirebilirsiniz.

            // startMessage'ı gizle
            document.getElementById("startMessage").style.display = "block";

            document.getElementById("quizButton1").style.display = "none";

            // START 3 SECTION düğmesini gizle
            document.getElementById("startSection3Button").style.display = "block";

            // Burada 3. bölüme ait diğer quiz başlatma işlemlerini gerçekleştirin
            // Örneğin, soruları yükleme veya zamanlayıcı başlatma işlemleri burada yapılabilir.
        }



        // document.getElementById("proceedSection3").style.display = "none"; // Üçüncü düğmeyi gizle
        // document.getElementById('endMessage').style.display = "none";
        // // document.getElementById('endMessage2').style.display = "none";
        // document.getElementById('lock-quiz-button-s-2').classList.add('hidden');
        // // İlk soruya yönlendirme vs. işlemlerini burada yapabilirsiniz
        // alert("Proceeding to the section 3 questions...");
        // startQuizS3();
        // Burada gerekli işlemleri yapabilirsiniz.




        function noButtonClicked(type) {
            if (type == 'section2') {
                document.getElementById("myModal").style.display = "none";
            } else {
                document.getElementById("myModalS3").style.display = "none";
            }
        }



        let isYesClickedS2 = false; // Section 2 için bayrak
        let isYesClickedS3 = false; // Section 3 için bayrak

        function yesButtonClicked(type, timesUp = false) {
            if (type == "section2") {
                if (timesUp && isYesClickedS2) {
                    return; // YES düğmesine tıklanmışsa, timesUp işlemini durdur.
                }

                isYesClickedS2 = true; // Section 2 için YES düğmesine tıklanıldığında bayrağı set ediyoruz.

                // YES düğmesine tıklandığında Section 2 zamanlayıcısını durdur
                clearInterval(timerIntervalS2);

                if (timesUp) {
                    const totalQuestions = document.querySelectorAll(".question").length;
                    currentQuestionIndex = totalQuestions - 1;
                    nextQuestionS2();
                    checkAnswersAndUpdateBlocksS2();
                }

                document.getElementById("myModal").style.display = "none";
                document.getElementById("proceedSection3").classList.add('hidden');
                document.getElementById("countdown").style.display = "none";
                document.getElementById("startMessage").style.display = "block";
            }

            else if (type == "section3") {
                if (timesUp && isYesClickedS3) {
                    return; // YES düğmesine tıklanmışsa, Section 3 için timesUp işlemini durdur.
                }

                isYesClickedS3 = true; // Section 3 için YES düğmesine tıklanıldığında bayrağı set ediyoruz.

                // YES düğmesine tıklandığında Section 3 zamanlayıcısını durdur
                clearInterval(timerInterval_S3);

                if (timesUp) {
                    const totalQuestions = document.querySelectorAll(".questionS3").length;
                    currentQuestionIndexS3 = totalQuestions - 1;
                    nextQuestionS3();
                    checkAnswersAndUpdateBlocks();
                }

                document.getElementById("myModalS3").style.display = "none";
                document.getElementById('proceedSection3End').classList.add('hidden');
                document.getElementById("app-s3").classList.add('hidden');
                document.getElementById("viewResultContainerId").classList.remove('hidden');

                let calculateS3Correct = correctAnswerS3.questions.filter(x => x.isCorrect === true);
                let calculateS2Correct = correctAnswerS2.questions.filter(x => x.isCorrect === true);

                let scoredMarks = correctAnswerS1 + calculateS2Correct.length + calculateS3Correct.length;
                document.getElementById('endResult').textContent = scoredMarks;

                if (calculateS3Correct.length >= 44) {
                    document.getElementById('failOrPass').textContent = 'Başarıyla Geçtiniz';
                    document.getElementById('failOrPassIcon').src = 'https://static.wixstatic.com/media/4b688f_12a1098a791f44f88cd7265a0517b851~mv2.png';
                } else {
                    document.getElementById('failOrPass').textContent = 'Maalesef Başarısız Oldunuz';
                    document.getElementById('failOrPassIcon').src = 'https://static.wixstatic.com/media/4b688f_149ee4392b034dac89b73aef8268aef9~mv2.png';
                }
            }
        }

        function finalResultShow() {
            viewResult = true;
            lockQuizQuestionsS3();

            // Sonucu gösterme işlemi
            document.getElementById('viewResultContainerId').classList.add('hidden');
            document.getElementById('finalResultContainerId').classList.remove('hidden');

            let calculateS3Correct = correctAnswerS3.questions.filter(x => x.isCorrect === true);

            if (calculateS3Correct.length >= 44) {
                document.getElementById('failOrPassEndS3').src = "https://static.wixstatic.com/media/4b688f_12a1098a791f44f88cd7265a0517b851~mv2.png";
            } else {
                document.getElementById('failOrPassEndS3').src = "https://static.wixstatic.com/media/4b688f_149ee4392b034dac89b73aef8268aef9~mv2.png";
            }

            // resultS3 içindeki tüm endMessage4-S3 öğelerini al
            const endMessageElements = document.querySelectorAll('#resultS3 #endMessage4-S3');

            if (endMessageElements.length > 1) {
                // İlk öğeyi hariç tutarak diğerlerini gizle
                for (let i = 1; i < endMessageElements.length; i++) {
                    endMessageElements[i].classList.add('hidden');
                }
            }
        }


        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            let modal = document.getElementById("myModal");
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        //Section 3
        let currentQuestionIndexS3 = 0;
        let selectedImages = [];
        let allQuestionsS3 = [];
        let quizAnswersS3 = [];

        function updatePreviousButtonS3() {
            const previousButton = document.getElementById("previous-button-s3");
            // İlk soruda "Previous" butonunu gizle
            previousButton.classList.toggle("hidden", currentQuestionIndexS3 === 0);
        }

        function updateNextButtonS3() {
            const nextButton = document.getElementById("next-button-s3");
            nextButton.classList.remove("hidden");
        }


        function showCurrentQuestionS3() {
            // Proceed bölümünü gizle
            document.getElementById('proceedSection3End').classList.add('hidden');

            // Soru numarasını güncelle
            const soruNumarasiS3 = document.getElementById("soruNumarasiS3");
            if (soruNumarasiS3) {
                soruNumarasiS3.innerText = `SORU ${currentQuestionIndexS3 + 1} / ${allQuestionsS3.length}`;
            } else {
                console.error("soruNumarasiS3 elementi bulunamadı!"); // Hata kontrolü
            }

            // Soruları göster/gizle
            document.querySelectorAll(".questionS3").forEach((question, index) => {
                question.classList.toggle("hidden", index !== currentQuestionIndexS3);
            });

            // Butonları güncelle
            updatePreviousButtonS3();
            updateNextButtonS3();
        }









        function previousQuestionS3() {
            if (currentQuestionIndexS3 > 0) {
                currentQuestionIndexS3--;
                showCurrentQuestionS3();
                updatePreviousButtonS3();
                updateNextButtonS3();
                checkAnswersAndUpdateBlocks();

            }
        }

        // Next düğmesine tıklama işlevi
        function nextQuestionS3() {
            const totalQuestions = allQuestionsS3.length; // Toplam soru sayısı
            if (currentQuestionIndexS3 < allQuestionsS3.length - 1) {
                currentQuestionIndexS3++; // Sonraki soruya geç
                showCurrentQuestionS3();
                updatePreviousButtonS3();
                updateNextButtonS3();
                checkAnswersAndUpdateBlocks();
            } else {
                // Son soru ise
                const quizContainer = document.querySelector(".quiz-container-s3");
                const endMessage3 = document.getElementById("endMessage3-S3");
                // endMessage3.id = "endMessage3-S3"; // endMessage3 öğesine bir id atayın
                // endMessage3.style.display = "flex";
                // endMessage3.style.flexWrap = "wrap";

                const endMessage4 = document.createElement("div");
                endMessage4.id = "endMessage4-S3"; // endMessage4 öğesine bir id atayın
                endMessage4.style.display = "flex";
                endMessage4.style.flexWrap = "wrap";
                for (let i = 0; i < totalQuestions; i++) {
                    const questionNumber = i + 1;
                    const questionBlock = document.createElement("div");
                    questionBlock.classList.add("question-block-s3");
                    questionBlock.style.width = "30px";
                    questionBlock.style.height = "30px";
                    questionBlock.style.border = "1px solid black";
                    questionBlock.style.textAlign = "center";
                    questionBlock.style.lineHeight = "30px";
                    questionBlock.style.margin = "5px";
                    questionBlock.textContent = questionNumber;
                    if (endMessage3.childElementCount != totalQuestions) {
                        endMessage3.appendChild(questionBlock);
                    }
                }

                for (let i = 0; i < totalQuestions; i++) {
                    const questionNumber = i + 1;
                    const questionBlock = document.createElement("div");
                    questionBlock.classList.add("question-block-s3");
                    questionBlock.style.width = "30px";
                    questionBlock.style.height = "30px";
                    questionBlock.style.border = "1px solid black";
                    questionBlock.style.textAlign = "center";
                    questionBlock.style.lineHeight = "30px";
                    questionBlock.style.margin = "5px";
                    questionBlock.textContent = questionNumber;
                    endMessage4.appendChild(questionBlock);
                }

                // endMessage3 içindeki question-block'lara tıklanınca işlev
                endMessage3
                    .querySelectorAll(".question-block-s3")
                    .forEach((block, index) => {
                        block.addEventListener("click", () => {
                            currentQuestionIndexS3 = index;
                            showCurrentQuestionS3();
                            updatePreviousButtonS3();
                            updateNextButtonS3();
                            // document
                            //   .querySelectorAll(".question-block-s3")
                            //   .forEach((block) => {
                            //     block.classList.add("hidden");
                            //   });

                            // Tüm soru bloklarını gizle
                            const questions = document.querySelectorAll(".questionS3");
                            questions.forEach((question) => {
                                question.classList.add("hidden");
                            });

                            // Seçilen sorunun bloğunu göster
                            const selectedQuestion = document.getElementById(
                                `questionS3-${currentQuestionIndexS3 + 1}`
                            );

                            selectedQuestion.classList.remove("hidden");

                            // Quiz container'ını göster
                            quizContainer.classList.remove("hidden");

                            document.getElementById("soruNumarasiS3").classList.remove("hidden");

                            // endMessage öğesini gizle
                            // endMessage3.classList.add("hidden");

                        });
                    });

                // endMessage4 içindeki question-block'lara tıklanınca işlev
                endMessage4
                    .querySelectorAll(".question-block-s3")
                    .forEach((block, index) => {
                        block.addEventListener("click", () => {
                            currentQuestionIndexS3 = index;
                            showCurrentQuestionS3();
                            updatePreviousButtonS3();
                            updateNextButtonS3();

                            document.getElementById("finalResultContainerId").classList.add("hidden");

                            document
                                .querySelectorAll(".question-block-s3")
                                .forEach((block) => {
                                    block.classList.add("hidden");
                                });

                            // Tüm soru bloklarını gizle
                            const questions = document.querySelectorAll(".questionS3");
                            questions.forEach((question) => {
                                question.classList.add("hidden");
                            });

                            // Seçilen sorunun bloğunu göster
                            const selectedQuestion = document.getElementById(
                                `questionS3-${currentQuestionIndexS3 + 1}`
                            );
                            selectedQuestion.classList.remove("hidden");

                            // Quiz container'ını göster
                            quizContainer.classList.remove("hidden");
                            document.getElementById("soruNumarasiS3").classList.remove("hidden");

                            // endMessage öğesini gizle
                            // endMessage3.classList.add("hidden");
                            endMessage4.classList.add("hidden");
                        });
                    });

                document.getElementById("previous-button-s3").classList.add("hidden");
                document.getElementById("next-button-s3").classList.add("hidden");

                // <div class="flex-grow"> içindeki <h2 id="soruNumarasiS3"> başlığını gizle
                document.getElementById("soruNumarasiS3").classList.add("hidden");

                quizContainer.classList.add("hidden");

                const body = document.querySelector("body");
                // body.appendChild(endMessage3);

                const resultSection3 = document.getElementById('resultS3');
                resultSection3.appendChild(endMessage4);
                // body.appendChild(endMessage4);


                // Cevapları değerlendir ve "endMessage3" ve "endMessage4" içindeki questionBlock'ların rengini güncelle
                if (viewResult) {
                    document.getElementById("finalResultContainerId").classList.remove("hidden");
                } else {
                    document.getElementById("proceedSection3End").classList.remove('hidden');
                }

                checkAnswersAndUpdateBlocks();
            }

        }

        function proceedToResultDiv() {
            document.getElementById("myModalS3").style.display = "block";
        }

        const FULL_DASH_ARRAY_S3 = 138; // Yeni çevre: 2 * π * 22 ≈ 138
        const WARNING_THRESHOLD_S3 = 450;
        const ALERT_THRESHOLD_S3 = 180;

        const COLOR_CODES_S3 = {
            info: {
                color: "green",
            },
            warning: {
                color: "orange",
                threshold: WARNING_THRESHOLD_S3,
            },
            alert: {
                color: "red",
                threshold: ALERT_THRESHOLD_S3,
            },
        };

        const TIME_LIMIT_S3 = 1800;
        let timePassed_S3 = 0;
        let timeLeft_S3 = TIME_LIMIT_S3;
        let timerInterval_S3 = null;
        let remainingPathColor_S3 = COLOR_CODES_S3.info.color;

        document.getElementById("app-s3").innerHTML = `
<div class="base-timer_S3">
    <svg class="base-timer__svg_S3" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <g class="base-timer__circle_S3">
            <circle class="base-timer__path-elapsed_S3" cx="50" cy="50" r="22"></circle>
            <path
                id="base-timer-path-remaining_S3"
                stroke-dasharray="${FULL_DASH_ARRAY_S3}"
                class="base-timer__path-remaining_S3 ${remainingPathColor_S3}"
                d="
                M 50, 50
                m -22, 0
                a 22,22 0 1,0 44,0
                a 22,22 0 1,0 -44,0
                "
            ></path>
        </g>
    </svg>
    <span id="base-timer-label-s3" class="base-timer__label_S3">${formatTimeS3(timeLeft_S3)}</span>
</div>`;


        function onTimesUpS3() {
            console.log("onTimesUpS3 fonksiyonu çalıştı!"); // Kontrol için log

            const questions = document.querySelectorAll(".questionS3");
            questions.forEach((question, index) => {
                question.classList.toggle("hidden", true);
            });
            document.getElementById("previous-button-s3").classList.toggle("hidden", true);
            document.getElementById("next-button-s3").classList.add("hidden");
            clearInterval(timerInterval_S3);

            console.log("yesButtonClicked çağrılıyor..."); // Kontrol için log
            yesButtonClicked('section3', true);
        }

        function startTimerS3() {
            timerInterval_S3 = setInterval(() => {
                timePassed_S3 = timePassed_S3 += 1;
                timeLeft_S3 = TIME_LIMIT_S3 - timePassed_S3;
                document.getElementById("base-timer-label-s3").innerHTML =
                    formatTimeS3(timeLeft_S3);
                setCircleDasharrayS3();
                setRemainingPathColorS3(timeLeft_S3);

                if (timeLeft_S3 === 0) {
                    onTimesUpS3();
                }
            }, 1000);
        }

        function formatTimeS3(time) {
            const minutes = Math.floor(time / 60);
            let seconds = time % 60;

            if (seconds < 10) {
                seconds = `0${seconds}`;
            }

            return `${minutes}:${seconds}`;
        }

        function setRemainingPathColorS3(timeLeft_S3) {
            const { alert, warning, info } = COLOR_CODES_S3;
            if (timeLeft_S3 <= alert.threshold) {
                document
                    .getElementById("base-timer-path-remaining_S3")
                    .classList.remove(warning.color);
                document
                    .getElementById("base-timer-path-remaining_S3")
                    .classList.add(alert.color);
            } else if (timeLeft_S3 <= warning.threshold) {
                document
                    .getElementById("base-timer-path-remaining_S3")
                    .classList.remove(info.color);
                document
                    .getElementById("base-timer-path-remaining_S3")
                    .classList.add(warning.color);
            }
        }

        function calculateTimeFractionS3() {
            const rawTimeFraction = timeLeft_S3 / TIME_LIMIT_S3;
            return rawTimeFraction - (1 / TIME_LIMIT_S3) * (1 - rawTimeFraction);
        }

        function setCircleDasharrayS3() {
            const circleDasharray = `${(
                calculateTimeFractionS3() * FULL_DASH_ARRAY_S3
            ).toFixed(0)} 138`;
            document
                .getElementById("base-timer-path-remaining_S3")
                .setAttribute("stroke-dasharray", circleDasharray);
        }

        function startCountdownWithPathS3(duration) {
            let timer = duration,
                minutes,
                seconds;
            startTimerS3();
        }

        async function fetchQuestionsS3(url, count) {
            try {
                const response = await fetch(url);
                const data = await response.json();
                const selectedQuestions = data.sorular
                    .sort(() => Math.random() - 0.5)
                    .slice(0, count);
                return selectedQuestions;
            } catch (error) {
                console.error("Soruları alırken bir hata oluştu:", error);
                return [];
            }
        }

        async function loadQuizS3() {
            const t1Questions = await fetchQuestionsS3(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_f7d6b0e226a94ec5b134351942a1e734.json",
                37
            );
            const t2Questions = await fetchQuestionsS3(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_5d3c251de3f6436680701cd6c095e3b7.json",
                3
            );
            const t3Questions = await fetchQuestionsS3(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_d7a473efdba5464499d5e38259b54bc4.json",
                1
            );
            const t4Questions = await fetchQuestionsS3(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_bd4f988951764289ae332872c3b693ad.json",
                2
            );
            const t5Questions = await fetchQuestionsS3(
                "https://4b688f47-79ef-4ce7-8524-c798a9ad084b.usrfiles.com/ugd/4b688f_d3b0c35d29b3482a9511e94abbc71809.json",
                7
            );

            // T1'den gelen sorulara "Radio" button, T3'ten gelen sorulara "Checkbox" uygula
            t1Questions.forEach((question) => {
                question.type = "radio";
                question.cevaplar = shuffleS3(question.cevaplar); // Seçenekleri karıştır
                question.correctAnswer = question.dogruCevap;
            });
            t2Questions.forEach((question) => (question.onlyNumbers = true));
            t3Questions.forEach((question) => {
                question.type = "checkbox";
                question.cevaplar = shuffleS3(question.cevaplar); // Seçenekleri karıştır
                question.correctAnswers = question.dogruCevap;
            });

            // T4'den gelen sorulara resim ekleyelim
            t4Questions.forEach((question) => {
                question.type = "image";
                // question.secenekler = shuffleS3(question.secenekler); // Artık karıştırma yapılmıyor
                question.correctAnswers = question.dogruCevap;
            });

            t5Questions.forEach((question) => (question.type = "dragdrop"));

            allQuestionsS3 = [
                ...t1Questions,
                ...t2Questions,
                ...t3Questions,
                ...t4Questions,
                ...t5Questions,
            ].sort(() => Math.random() - 0.5);

            console.log("Toplam soru sayısı:", allQuestionsS3.length); // Test amaçlı

            // Soruların doğru cevaplarını ve kullanıcı cevaplarını belirleyin
            quizAnswersS3 = allQuestionsS3.map((question, index) => ({
                id: index + 1,
                dogruCevap: question.dogruCevap,
                userAnswer: [], // Önce userAnswer'ı boş dizi olarak başlat
                type: question.type
            }));

            const quizContainer = document.querySelector(".quiz-container-s3");
            quizContainer.innerHTML = createHTMLForQuestionsS3(allQuestionsS3);

            allQuestionsS3.forEach((question, index) => {
                if (question.type === "dragdrop") {
                    createDragAndDropHTMLFromJSONS3(question, index + 1);
                    addDragAndDropFunctionalityS3(index + 1);
                }
            });

            showCurrentQuestionS3();
            updatePreviousButtonS3();
            updateNextButtonS3();
            checkAnswersAndUpdateBlocks();
        }



        function createHTMLForQuestionsS3(questions) {
            let html = "";
            questions.forEach((question, index) => {
                console.log("Processing question:", question); // Debug log

                const questionId = `questionS3-${index + 1}`;
                html += `<div class="questionS3 hidden ${(!question.resim && !question.video && question.type !== 'image') ? 'no-image' : ''}" id="${questionId}">`;
                html += `<p>${index + 1}. ${question.soru}</p>`;

                if (question.type === "dragdrop") {
                    html += `<div id="demo-${index + 1}" class="drag-drop-container"></div>`;
                } else {
                    if (question.resim) {
                        console.log("Adding image:", question.resim); // Debug log
                        html += `<img src="${question.resim}" alt="Resim" class="question-image"><br>`;
                    }
                    if (question.video) {
                        console.log("Adding video:", question.video); // Debug log
                        html += `<video controls class="question-video">
                            <source src="${question.video}" type="video/mp4">
                            Tarayıcınız video etiketini desteklemiyor.
                         </video><br>`;
                    }
                    if (question.type === "image") {
                        const imageContainerClass = question.secenekler.length === 4 ? 'image-container grid-4' : 'image-container';
                        html += `<div class="${imageContainerClass}">`;
                        question.secenekler.forEach((resim, resimIndex) => {
                            html += `<div class="image-wrapper">
                                <img src="${resim}" alt="Resim ${resimIndex + 1}" class="question-image question-image-t4 selectable" onclick="toggleSelectionS3(this, ${index + 1}, ${resimIndex})">
                             </div>`;
                        });
                        html += `</div><br>`;
                    } else if (question.resimler) {
                        question.resimler.forEach((resim, resimIndex) => {
                            html += `<img src="${resim}" alt="Resim ${resimIndex + 1}" class="selectable" onclick="toggleSelectionS3(this)"><br>`;
                        });
                    }

                    html += '<div class="answers">';

                    if (question.type === "radio") {
                        question.cevaplar.forEach((cevap, cevapIndex) => {
                            html += `<label class="cevapSecenegi-s3" onclick="highlightSelectedS3(this, ${index + 1})">
                                <input type="radio" name="answer${index + 1}" value="${cevap}"> ${cevap}<br>
                             </label>`;
                        });
                    } else if (question.type === "checkbox") {
                        question.cevaplar.forEach((cevap, cevapIndex) => {
                            html += `<label class="cevapSecenegi-s3" onclick="highlightSelectedCheckboxS3(this, ${index + 1})">
                                <input type="checkbox" name="answer${index + 1}[]" value="${cevap}"> ${cevap}<br>
                             </label>`;
                        });
                    } else if (question.onlyNumbers) {
                        html += `<input type="number" name="answer${index + 1}" class="answer-input" placeholder="Cevabınızı girin" oninput="handleTextInputS3(${index + 1}, this)" inputmode="numeric"><br>`;
                    }

                    // Feedback için alan ekleme
                    html += `</div>
                     <div class="feedback" id="feedback-${index + 1}" style="display: none;">
                     ${question.feedback ? question.feedback : ""}
                     </div>`;
                }
                html += "</div>";
            });
            return html;
        }



        // Cevapları karıştırmak için fonksiyon
        function shuffleS3(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createDragAndDropHTMLFromJSONS3(question, index) {
            const demoDiv = document.getElementById(`demo-${index}`);

            if (demoDiv) {
                demoDiv.innerHTML = "";

                question.elements.forEach((element, eIndex) => {
                    const htmlElement = document.createElement("div");
                    htmlElement.className = `${element.type} ${element.class}`;
                    htmlElement.setAttribute(
                        "id",
                        `${element.type}-${index}-${eIndex}`
                    );
                    htmlElement.style.top = element.position.top;
                    htmlElement.style.left = element.position.left;
                    htmlElement.innerText = element.value;
                    htmlElement.setAttribute(
                        "data-target",
                        element.type === "box" ? "" : element.value
                    );
                    htmlElement.setAttribute("draggable", "true");
                    demoDiv.appendChild(htmlElement);
                });

                if (question.resim) {
                    const image = document.createElement("img");
                    image.src = question.resim;
                    image.alt = "Question Image";
                    demoDiv.appendChild(image);
                }

                /* window.addEventListener("resize", () =>
                     scaleElementsS3(`#demo-${index}`)
                 );
                 scaleElementsS3(`#demo-${index}`);
             } else {
                 console.error(`demoDiv bulunamadı: demo-${index}`);*/
            }
        }

        function scaleElementsS3(containerSelector) {
            const container = document.querySelector(containerSelector);
            if (!container) return;

            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;
            const scaleX = window.innerWidth / containerWidth;
            const scaleY = window.innerHeight / containerHeight;
            const scale = Math.min(scaleX, scaleY);

            container.style.transform = `scale(${scale})`;
        }








        function addDragAndDropFunctionalityS3(index) {
            const demo = document.getElementById(`demo-${index}`);
            const draggers = demo.querySelectorAll(".box");
            const targets = demo.querySelectorAll(".target");

            // Her bir draggable için başlangıç ayarları
            draggers.forEach(function (dragger) {
                dragger.setAttribute("draggable", "true");
                dragger.style.cursor = "pointer";
                dragger.originalLeft = dragger.style.left;
                dragger.originalTop = dragger.style.top;
                dragger.targetAttachedTo = null;  // Başlangıçta bir hedefe bağlı değil
            });

            // Drag and Drop işlevselliği
            Draggable.create(draggers, {
                bounds: demo,
                edgeResistance: 0.1,
                inertia: true,
                onDragStart: function (event) {
                    // Drag işlemi başladığında tüm hedefleri "highlight" ile vurgula
                    targets.forEach((target) => target.classList.add("highlight"));
                },
                onDragEnd: function (event) {
                    let snapMade = false;

                    // Her hedefi kontrol et
                    targets.forEach((target) => {
                        if (this.hitTest(target, { threshold: "80%" })) {
                            // Eğer hedef "occupied" değilse, hedefi işaretle ve sürüklenen kutuyu hedefe yerleştir
                            if (!target.classList.contains("occupied")) {
                                target.classList.add("occupied"); // Burada occupied sınıfı ekleniyor
                                gsap.to(event.target, {
                                    duration: 0.6,
                                    left: target.style.left,
                                    top: target.style.top,
                                    x: 0,
                                    y: 0,
                                });

                                // Eğer kutu daha önce başka bir hedefe bağlıysa, eski bağlantıyı kaldır
                                if (event.target.targetAttachedTo !== target) {
                                    if (event.target.targetAttachedTo) {
                                        event.target.targetAttachedTo.classList.remove("occupied"); // Eski hedeften occupied sınıfı kaldırılır
                                    }
                                    event.target.targetAttachedTo = target; // Yeni hedefe bağla
                                }

                                // Yeni hedefe data-target ekle
                                event.target.setAttribute("data-target", target.id);
                                snapMade = true; // Bırakma işlemi başarılı
                            }
                        }
                        // "highlight" sınıfını hedeften kaldır
                        target.classList.remove("highlight");
                    });

                    // Eğer hedefe bırakılmadıysa
                    if (!snapMade) {
                        // Eski hedef bağlantısını kaldır
                        if (event.target.targetAttachedTo) {
                            event.target.targetAttachedTo.classList.remove("occupied"); // Geri çekilince occupied sınıfı kaldırılır
                            event.target.targetAttachedTo = null; // Hedef bağlantısını sıfırla
                        }

                        // data-target ilişkisinin kaldırılması
                        event.target.setAttribute("data-target", '');

                        // Kutuyu orijinal pozisyona geri yerleştir
                        gsap.to(event.target, {
                            duration: 0.6,
                            x: 0,
                            y: 0,
                            left: event.target.originalLeft,
                            top: event.target.originalTop,
                        });
                    }

                    // Cevaplanan verileri güncelle
                    updateDragDropUserAnswersS3(index, draggers);

                    // Değerlendirme fonksiyonunu çağır
                    evaluateAnswersS3('endMessage3-S3');
                },
            });
        }



        // Kullanıcı cevaplarını güncelleme fonksiyonu
        function updateDragDropUserAnswersS3(index, draggers) {
            draggers.forEach(dragger => {
                const targetId = dragger.getAttribute("data-target");
                const questionId = dragger.id.split('-')[1]; // Örneğin, dragger id'si "box-1" ise
                const question = quizAnswersS3.find(q => q.id === parseInt(questionId));
                if (question) {
                    if (!question.userAnswer) {
                        question.userAnswer = [];
                    }
                    const existingAnswerIndex = question.userAnswer.findIndex(answer => answer.id === dragger.id);
                    if (targetId) {
                        if (existingAnswerIndex === -1) {
                            question.userAnswer.push({ id: dragger.id, target: targetId });
                        } else {
                            question.userAnswer[existingAnswerIndex].target = targetId;
                        }
                    } else {
                        if (existingAnswerIndex !== -1) {
                            question.userAnswer.splice(existingAnswerIndex, 1);
                        }
                    }
                }
            });
        }


        //MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM

        // toggleSelectionS3 fonksiyonu
        function toggleSelectionS3(image, questionIndex, resimIndex) {
            const selectedAnswer = quizAnswersS3.find((q) => q.id === questionIndex);
            if (!selectedAnswer.userAnswer) {
                selectedAnswer.userAnswer = [];
            }

            const resimURL = image.getAttribute("src");

            if (selectedAnswer.userAnswer.includes(resimURL)) {
                image.parentNode.classList.remove("selected");
                selectedAnswer.userAnswer.splice(
                    selectedAnswer.userAnswer.indexOf(resimURL),
                    1
                );
            } else {
                image.parentNode.classList.add("selected");
                selectedAnswer.userAnswer.push(resimURL);
            }

            evaluateAnswersS3("endMessage3-S3"); // Cevapları güncelle
            evaluateAnswersS3("endMessage4-S3"); // Cevapları güncelle
        }



        document.addEventListener("input", function (e) {
            if (e.target.classList.contains("answer-input")) {
                let value = e.target.value.replace(/\D/g, "");
                e.target.value = value;
                const questionIndex = parseInt(e.target.name.replace("answer", ""));
                handleTextInputS3(questionIndex, e.target);
            }
            evaluateAnswersS3("endMessage3-S3"); // input değiştiğinde cevapları güncelle
            evaluateAnswersS3("endMessage4-S3"); // input değiştiğinde cevapları güncelle
        });

        function handleTextInputS3(questionIndex, input) {
            const question = quizAnswersS3.find((q) => q.id === questionIndex);
            if (question) {
                question.userAnswer = [input.value]; // Single answer wrapped in an array for uniformity
            }
        }

        function highlightSelectedS3(radio, questionIndex) {
            var questionBlock = radio.closest(".questionS3");
            var labels = questionBlock.querySelectorAll(".cevapSecenegi-s3");
            labels.forEach((label) => label.classList.remove("selectedAnswer"));
            radio.closest(".cevapSecenegi-s3").classList.add("selectedAnswer");
            handleAnswerInputS3(questionIndex, radio.querySelector("input").value);
        }

        function highlightSelectedCheckboxS3(label, questionIndex) {
            const checkbox = label.querySelector('input[type="checkbox"]');
            const selectedAnswer = quizAnswersS3.find((q) => q.id === questionIndex);

            if (!selectedAnswer.userAnswer) {
                selectedAnswer.userAnswer = [];
            }

            if (checkbox.checked) {
                if (!selectedAnswer.userAnswer.includes(checkbox.value)) {
                    selectedAnswer.userAnswer.push(checkbox.value);
                }
                label.classList.add("selectedAnswer");
            } else {
                const answerIndex = selectedAnswer.userAnswer.indexOf(checkbox.value);
                if (answerIndex > -1) {
                    selectedAnswer.userAnswer.splice(answerIndex, 1);
                }
                label.classList.remove("selectedAnswer");
            }

            evaluateAnswersS3("endMessage3-S3");
            evaluateAnswersS3("endMessage4-S3");
        }

        function handleAnswerInputS3(questionIndex, answer) {
            const question = quizAnswersS3.find((q) => q.id === questionIndex);
            if (question) {
                question.userAnswer = [answer]; // Single answer wrapped in an array for uniformity
            }
            evaluateAnswersS3("endMessage3-S3");
            evaluateAnswersS3("endMessage4-S3");
        }




        function evaluateAnswersS3(containerId) {
            if (containerId === 'endMessage3-S3') {
                correctAnswerS3 = { questions: [], correct: 0, answer: 0, unanswer: 0 };
            }

            const questionBlocks = document.querySelectorAll(`#${containerId} .question-block-s3`);

            for (let index = 0; index < questionBlocks.length; index++) {
                let block = questionBlocks[index];
                const questionIndex = parseInt(block.textContent);
                const question = quizAnswersS3.find((q) => q.id === questionIndex);
                let findCheck = correctAnswerS3.questions.find(x => x.id === questionIndex);

                block.style.backgroundColor = "transparent";

                if (question.userAnswer && question.userAnswer.length > 0) {
                    if (containerId === 'endMessage3-S3') {
                        correctAnswerS3.answer += 1;
                    }

                    let isCorrect = false;

                    if (!Array.isArray(question.dogruCevap)) {
                        question.dogruCevap = [question.dogruCevap];
                    }
                    if (!Array.isArray(question.userAnswer)) {
                        question.userAnswer = [question.userAnswer];
                    }

                    console.log(`\n========== Question ${questionIndex} ==========`)
                    console.log("Question Type:", question.type);
                    console.log("Correct Answers:", question.dogruCevap);
                    console.log("User Answers (Raw):", question.userAnswer);

                    if (Array.isArray(question.dogruCevap) && question.type !== "dragdrop") {
                        const sortedCorrectAnswers = [...question.dogruCevap].sort();
                        const sortedUserAnswers = [...question.userAnswer].sort();

                        isCorrect = sortedCorrectAnswers.length === sortedUserAnswers.length &&
                            sortedCorrectAnswers.every((answer, idx) => answer === sortedUserAnswers[idx]);

                    } else if (question.type === "dragdrop") {
                        const userAnswersArray = Array.isArray(question.userAnswer) ? question.userAnswer : [question.userAnswer];

                        // Kullanıcının verdiği target'ların ID'sini çekiyoruz
                        const usedTargets = userAnswersArray.map(a => parseInt(a.target.split('-').pop()));
                        const usedTargetsSorted = [...new Set(usedTargets)].sort((a, b) => a - b);

                        // Box sayısı, draggerX sayısını belirler
                        const boxCount = userAnswersArray.filter(a => a.id && a.id.startsWith('box')).length;

                        console.log("Detected Box Count:", boxCount);
                        console.log("Raw Used Targets:", usedTargetsSorted);

                        // Target mapping yapılacak: örn. target-N-5 → target1, target-N-6 → target2
                        const targetMap = {};
                        usedTargetsSorted.forEach((targetNum, idx) => {
                            const logicalTarget = `target${(targetNum - boxCount + 1)}`;
                            targetMap[`target-${questionIndex}-${targetNum}`] = logicalTarget;
                        });

                        console.log("Target Mapping:", targetMap);

                        // User cevaplarını normalize et
                        const formattedUserAnswers = userAnswersArray.map(answer => {
                            if (answer.id && answer.target) {
                                const draggerNum = parseInt(answer.id.split('-').pop()) + 1;
                                const fullTargetId = answer.target;

                                return {
                                    id: `dragger${draggerNum}`,
                                    target: targetMap[fullTargetId]
                                };
                            }
                            return null;
                        }).filter(Boolean);

                        console.log("Formatted User Answers:", formattedUserAnswers);
                        console.log("Expected Correct Answers:", question.dogruCevap);

                        isCorrect = question.dogruCevap.length === formattedUserAnswers.length &&
                            question.dogruCevap.every(correctPair =>
                                formattedUserAnswers.some(userPair =>
                                    userPair.id === correctPair.id && userPair.target === correctPair.target
                                )
                            );

                        console.log("Is Correct:", isCorrect);

                    } else {
                        isCorrect = question.userAnswer.length === 1 && question.userAnswer[0] === question.dogruCevap[0];
                    }

                    if (containerId === "endMessage3-S3") {
                        block.style.backgroundColor = "lightgray";
                        if (findCheck) {
                            findCheck.isCorrect = false;
                        }
                    } else if (containerId === "endMessage4-S3") {
                        block.style.backgroundColor = isCorrect ? "#00FF00" : "red";
                        if (isCorrect) {
                            correctAnswerS3.correct += 1;
                            if (findCheck) {
                                findCheck.isCorrect = isCorrect;
                            } else {
                                correctAnswerS3.questions.push({ id: questionIndex, isCorrect: isCorrect });
                            }
                        } else {
                            if (findCheck) {
                                findCheck.isCorrect = false;
                            }
                        }
                    }
                } else {
                    if (containerId === 'endMessage3-S3') {
                        correctAnswerS3.unanswer += 1;
                    }
                    if (findCheck) {
                        findCheck.isCorrect = false;
                    }
                }
            }

            // Sonuç gösterimi
            try {
                const answeredEl = document.getElementById('answeredQuestionsS3End');
                const unAnsweredEl = document.getElementById('unAnsweredQuestionsS3End');

                if (answeredEl) answeredEl.textContent = `Cevaplanan Soru Sayısı: ${correctAnswerS3.answer}`;
                if (unAnsweredEl) unAnsweredEl.textContent = `Cevaplanmamış Soru Sayısı: ${correctAnswerS3.unanswer}`;

                if (containerId === "endMessage4-S3") {
                    const correctEl = document.getElementById('correctAnswersS3End');
                    if (correctEl) correctEl.textContent = `Number of Correct Answers: ${correctAnswerS3.correct}`;
                }
            } catch (error) {
                console.warn("Sonuçlar gösterilirken hata oluştu:", error);
            }
        }


        function checkAnswersAndUpdateBlocks() {
            // Evaluate answers for endMessage3 and endMessage4
            evaluateAnswersS3("endMessage3-S3");
            evaluateAnswersS3("endMessage4-S3");
        }

        function startQuizS3() {
            // Start message ve START 3 SECTION düğmesini gizle
            document.getElementById("startMessage").style.display = "none"; // Start Message gizle
            document.getElementById("startSection3Button").style.display = "none"; // START 3 SECTION düğmesini gizle

            // Quiz başlatma işlemleri
            loadQuizS3(); // 3. bölüm sorularını yükle

            document.getElementById("app-s3").classList.remove("hidden"); // Quiz uygulamasını göster

            // Önceki zamanlayıcıyı gizle
            document.getElementById("countdown").classList.add('hidden');

            let fifteenMinutes = 60 * 15; // 15 dakika ayarla
            startCountdownWithPathS3(fifteenMinutes); // 3. bölüm zamanlayıcı başlat

            checkAnswersAndUpdateBlocks(); // Cevapları kontrol et ve blokları güncelle
        }

        // lockQuizQuestions fonksiyonu
        function lockQuizQuestionsS3() {
            const questions = document.querySelectorAll(".questionS3");
            questions.forEach((question, index) => {
                let isCorrectArrayDragDrop = [];
                question.classList.add("hidden");

                const inputs = question.querySelectorAll("input, .question-image-t4");
                const isDragDropQuestion = question.querySelector('.drag-drop-container') !== null;

                // Drag-drop soruları için işlemler
                if (isDragDropQuestion) {
                    const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                    const questionData = quizAnswersS3[questionIndex];

                    const checkDrops = question.querySelectorAll(".box");

                    checkDrops.forEach((box) => {
                        if (box.dataset.target) {
                            let split = box.id.split('-');
                            let split2 = box.dataset.target.split('-');

                            if (split[split.length - 1] == (split2[split2.length - 1] - checkDrops.length)) {
                                box.style.backgroundColor = 'rgb(11, 207, 11)';
                                box.style.border = '4px solid white';
                                box.style.color = 'white';
                                isCorrectArrayDragDrop.push(true);
                            } else {
                                box.style.backgroundColor = 'red';
                                box.style.border = '4px solid white';
                                box.style.color = 'white';
                                isCorrectArrayDragDrop.push(false);
                            }
                        }
                        box.draggable = false;
                        box.style.pointerEvents = 'none';
                    });
                }


                // Inputlar ve diğer elementler için işlemler
                inputs.forEach((input) => {
                    const label = input.closest(".cevapSecenegi-s3");
                    if (!label && input.classList.contains("question-image-t4")) {
                        input.classList.add("disabled3");

                        const markerSpan = document.createElement("span");
                        markerSpan.classList.add("marker");
                        markerSpan.style.position = "absolute";
                        markerSpan.style.top = "5px";
                        markerSpan.style.right = "5px";
                        markerSpan.style.fontSize = "15px";
                        markerSpan.style.backgroundColor = "white";
                        markerSpan.style.borderRadius = "50%";
                        markerSpan.style.padding = "2px";

                        const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                        const questionData = quizAnswersS3[questionIndex];
                        if (questionData.dogruCevap.includes(input.src)) {
                            markerSpan.textContent = "✔️";
                        } else {
                            markerSpan.textContent = "❌";
                        }

                        const parentContainer = input.parentElement;
                        parentContainer.style.position = "relative";
                        parentContainer.appendChild(markerSpan);
                        markerSpan.style.top = `${input.offsetTop + 5}px`;
                        markerSpan.style.right = `${input.offsetLeft + 5}px`;
                        return;
                    }

                    if (input.type === "text") {
                        input.disabled = true;

                        const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                        const questionData = quizAnswersS3[questionIndex];
                        if (!input.value.trim()) {
                            input.style.backgroundColor = "lightgray";
                            return;
                        }
                        if (!input.parentNode.querySelector(".marker")) {
                            const markerSpan = document.createElement("span");
                            markerSpan.classList.add("marker");
                            markerSpan.style.marginRight = "10px";
                            markerSpan.style.display = "inline-block";
                            markerSpan.style.width = "20px";

                            if (questionData.dogruCevap.includes(input.value)) {
                                markerSpan.textContent = "✔️";
                                input.style.backgroundColor = "rgb(11, 207, 11)";
                            } else {
                                markerSpan.textContent = "❌";
                                input.style.backgroundColor = "red";
                            }

                            input.parentNode.insertBefore(markerSpan, input);
                        }
                        return;
                    }

                    if (label && input.type !== "text") {
                        input.disabled = true;
                        label.style.pointerEvents = "none";

                        if (!label.querySelector(".marker")) {
                            const markerSpan = document.createElement("span");
                            markerSpan.classList.add("marker");
                            markerSpan.style.marginRight = "0px";
                            markerSpan.style.display = "inline-block";
                            markerSpan.style.width = "20px";

                            const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                            const questionData = quizAnswersS3[questionIndex];

                            if (questionData.dogruCevap.includes(input.value)) {
                                markerSpan.textContent = "✔️";
                                if (input.checked) {
                                    label.classList.add("selected-correct");
                                    label.style.backgroundColor = "rgb(11, 207, 11)";
                                } else {
                                    label.style.backgroundColor = "lightgrey";
                                }
                            } else {
                                markerSpan.textContent = "❌";
                                if (input.checked) {
                                    label.classList.add("selected-wrong");
                                    label.style.backgroundColor = "red";
                                } else {
                                    label.style.backgroundColor = "lightgrey";
                                }
                            }

                            label.insertBefore(markerSpan, label.firstChild);
                        }
                    }
                });

                // Number inputlarını devre dışı bırak
                const numberInputs = question.querySelectorAll('input[type="number"]');
                numberInputs.forEach(input => {
                    input.disabled = true;
                });

                // Feedback kutusunu ekle
                const questionIndex = parseInt(question.id.split("-")[1]) - 1;
                const feedback = allQuestionsS3[questionIndex].feedback;

                if (feedback) {
                    const feedbackDiv = document.createElement("div");
                    feedbackDiv.className = "feedback-container";
                    feedbackDiv.style.border = "1px solid #848586";
                    feedbackDiv.style.padding = "10px";
                    feedbackDiv.style.display = "flex";
                    feedbackDiv.style.alignItems = "center";
                    feedbackDiv.style.width = "93%";
                    feedbackDiv.style.maxWidth = "100%";
                    feedbackDiv.style.borderRadius = "10px";
                    feedbackDiv.style.boxShadow = "0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)";
                    feedbackDiv.style.margin = "0 auto"; // Yatay ortalama
                    feedbackDiv.style.justifyContent = "center"; // İçeriği ortalama
                    feedbackDiv.id = `feedback-${index + 1}`;

                    // Drag-drop soruları için feedback kutusuna ekstra genişlik ayarla
                    if (isDragDropQuestion) {
                        const parentGridCell = question.closest(".grid-cell"); // Bulunduğu grid hücresini seç
                        if (parentGridCell) {
                            const gridWidth = parentGridCell.getBoundingClientRect().width; // Hücrenin genişliğini al
                            feedbackDiv.style.width = `${gridWidth * 0.9}px`; // %90'ını ayarla
                        }
                    }

                    const feedbackText = feedback.metin;

                    const feedbackTextBox = document.createElement("div");
                    feedbackTextBox.className = "feedback-text";
                    feedbackTextBox.textContent = feedbackText;
                    feedbackTextBox.style.margin = "0";
                    feedbackTextBox.style.flex = "1";
                    feedbackTextBox.style.overflow = "auto";
                    feedbackTextBox.style.whiteSpace = "pre-wrap";
                    feedbackTextBox.style.textAlign = "center"; // Metni ortalama
                    feedbackDiv.appendChild(feedbackTextBox);

                    const feedbackImage = document.createElement("img");
                    feedbackImage.style.width = "30px";
                    feedbackImage.style.height = "30px";
                    feedbackImage.style.marginLeft = "5px";
                    feedbackImage.style.border = "0px solid";

                    const endMessage4Block = document.querySelector(`#endMessage4-S3 .question-block-s3:nth-child(${index + 1})`);
                    let feedbackImageUrl;
                    if (endMessage4Block) {
                        const backgroundColor = window.getComputedStyle(endMessage4Block).backgroundColor;
                        if (backgroundColor === "rgb(0, 255, 0)") { // Yeşil renk (Doğru cevap)
                            feedbackImageUrl = feedback.dogruCevapResim;
                        } else if (backgroundColor === "rgb(255, 0, 0)") { // Kırmızı renk (Yanlış cevap)
                            feedbackImageUrl = feedback.yanlisCevapResim;
                        } else { // Cevaplanmamış
                            feedbackImageUrl = feedback.cevaplanmamisResim;
                        }
                    } else {
                        feedbackImageUrl = feedback.cevaplanmamisResim;
                    }

                    feedbackImage.src = feedbackImageUrl;
                    feedbackDiv.appendChild(feedbackImage);

                    const answersElement = question.querySelector('.answers');
                    if (answersElement) {
                        answersElement.appendChild(feedbackDiv);
                    } else {
                        question.appendChild(feedbackDiv);
                    }
                }

            });

            // Timer'ı gizle
            const timerDiv = document.getElementById("timerDiv");
            if (timerDiv) {
                timerDiv.style.display = "none";
            }

            // Soru alanlarını sıfırla
            const soruAlanlari = document.querySelectorAll(".questionS3");
            soruAlanlari.forEach((soruAlani) => {
                soruAlani.style.top = "0px";
            });

            const overlay = document.querySelector(".overlay");
            if (overlay) {
                overlay.classList.add("overlay-thin-top");
            }
        }

        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */
        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */

        // Koordinat görüntüleme elemanını seç
        const display = document.querySelector('.coordinateDisplay');

        // Fare hareketini dinle
        document.addEventListener('mousemove', (event) => {
            const x = event.clientX;
            const y = event.clientY;

            // Koordinatları ekranda göster
            display.textContent = `X: ${x}, Y: ${y}`;
        });

        // Tıklanan noktayı işaretlemek için
        document.addEventListener('click', (event) => {
            const highlight = document.createElement('div');
            highlight.classList.add('highlightXY');
            highlight.style.width = '10px';
            highlight.style.height = '10px';
            highlight.style.borderRadius = '50%';
            highlight.style.left = `${event.clientX - 5}px`;
            highlight.style.top = `${event.clientY - 5}px`;

            document.body.appendChild(highlight);

            // İşaretin 2 saniye sonra kaldırılması
            setTimeout(() => {
                highlight.remove();
            }, 2000);
        });

        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */
        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */
        /*Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat Müveqqeti kordinat */


        // Mesaj dinleyicisi
        window.addEventListener("message", function (event) {
            // Mesajın güvenilir bir kaynaktan geldiğinden emin ol
            if (event.origin !== "https://www.examtheorie.nl") return;

            const message = event.data;
            console.log("Iframe'e mesaj alındı:", message);

            // Mesaj bir nesne ise ve action özelliği "updateButtons" ise
            if (typeof message === "object" && message.action === "updateButtons") {
                const progress = message.progress; // Tamamlanan testlerin listesi
                console.log("Progress bilgileri alındı:", progress);

                // QUIZ-1 butonunu kontrol et ve güncelle
                updateQuiz1Button(progress);
            }
        });

        // QUIZ-1 butonunu güncelleme fonksiyonu
        function updateQuiz1Button(progress) {
            // QUIZ-1 butonunu seç
            const quiz1Button = document.getElementById("quizButton1");

            if (quiz1Button) {
                // Eğer progress dizisinde 1 varsa, butonu devre dışı bırak
                if (progress.includes(1)) {
                    quiz1Button.disabled = true;
                    quiz1Button.textContent = "QUIZ-1 (Tamamlandı)";
                    quiz1Button.classList.add("deactivated");
                } else {
                    // Eğer progress dizisinde 1 yoksa, butonu aktif bırak
                    quiz1Button.disabled = false;
                    quiz1Button.textContent = "QUIZ-1";
                    quiz1Button.classList.remove("deactivated");
                }
            }
        }


        // Sağ tıklamayı engelle
        document.addEventListener("contextmenu", function (event) {
            event.preventDefault();
        });

        // Metin seçmeyi engelle
        document.addEventListener("selectstart", function (event) {
            event.preventDefault();
        });





        // Sayfayı tam ekran yapma fonksiyonu
        function openFullscreen() {
            const elem = document.documentElement;  // Sayfanın kök elementi

            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.mozRequestFullScreen) {  // Firefox
                elem.mozRequestFullScreen();
            } else if (elem.webkitRequestFullscreen) {  // Safari, Chrome, Opera
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) {  // IE/Edge
                elem.msRequestFullscreen();
            }
        }


        document.addEventListener("wheel", function (event) {
            if (event.ctrlKey) {
                event.preventDefault();
            }
        }, { passive: false });

        document.addEventListener("keydown", function (event) {
            if (event.ctrlKey && (event.key === "+" || event.key === "-" || event.key === "0")) {
                event.preventDefault();
            }
        });





    </script>
</body>

</html>